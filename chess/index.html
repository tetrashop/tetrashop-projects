<!DOCTYPE html>
<html style="height:100%;">
<head>
<link rel="stylesheet" href="/projects-override.css">
<link rel="stylesheet" href="/style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø´Ø·Ø±Ù†Ø¬ ØªØ¹Ø§Ù…Ù„ÛŒ | ØªØªØ±Ø§Ø´Ø§Ù¾</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vazirmatn@33.003/font.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Vazirmatn', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            min-height: 100vh;
            padding: 15px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        .header {
            text-align: center;
            padding: 20px 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        h1 {
            color: #f8c555;
            font-size: 1.8rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            line-height: 1.3;
        }
        
        .game-area {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        @media (min-width: 768px) {
            .game-area {
                flex-direction: row;
            }
        }
        
        .chess-board-container {
            flex: 2;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 15px;
            border: 2px solid #2a3b5c;
            min-width: 0; /* Ø¨Ø±Ø§ÛŒ responsive */
        }
        
        .chess-board {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            aspect-ratio: 1/1;
            border: 8px solid #3a2c2c;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
            position: relative;
            overflow: hidden;
        }
        
        @media (max-width: 480px) {
            .chess-board {
                border-width: 5px;
            }
        }
        
        .board-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(8, 1fr);
            width: 100%;
            height: 100%;
        }
        
        .board-square {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
            touch-action: manipulation;
        }
        
        .board-square:active {
            transform: scale(0.95);
        }
        
        .light-square {
            background-color: #eeeed2;
        }
        
        .dark-square {
            background-color: #769656;
        }
        
        .selected-square {
            background-color: rgba(255, 215, 0, 0.5) !important;
            box-shadow: inset 0 0 0 3px gold;
        }
        
        .controls-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
            min-width: 0;
        }
        
        .game-controls {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 8px;
            font-family: 'Vazirmatn';
            font-size: 15px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.2s;
            width: 100%;
            touch-action: manipulation;
        }
        
        @media (min-width: 480px) {
            .btn {
                width: auto;
                min-width: 120px;
            }
        }
        
        .btn:active {
            transform: scale(0.95);
        }
        
        .btn-premium {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #333;
            font-weight: bold;
        }
        
        .btn-success {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
        }
        
        .btn-danger {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }
        
        .game-info {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 14px;
        }
        
        .turn-indicator {
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            margin: 15px 0;
            font-size: 16px;
        }
        
        .white-turn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid white;
        }
        
        .black-turn {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #555;
            color: #ccc;
        }
        
        .income-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .income-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shine 3s infinite linear;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .back-btn {
            display: inline-block;
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 20px;
            text-align: center;
            width: 100%;
            max-width: 300px;
        }
        
        .controls-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .mobile-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }
        
        .mobile-controls .btn {
            flex: 1;
            min-width: 0;
            padding: 10px 5px;
            font-size: 13px;
        }
        
        @media (max-width: 767px) {
            .header h1 {
                font-size: 1.5rem;
            }
            
            .income-banner {
                padding: 20px 15px;
                margin: 20px 0;
            }
            
            .game-controls, .game-info {
                padding: 15px;
            }
        }
    </style>
</head>
<body style="margin:0;padding:0;min-height:100vh;">
    <div class="container">
        <div class="header">
            <h1>â™” Ø´Ø·Ø±Ù†Ø¬ ØªØ¹Ø§Ù…Ù„ÛŒ ØªØªØ±Ø§Ø´Ø§Ù¾</h1>
            <p>Ø¨Ø§Ø²ÛŒ Ø´Ø·Ø±Ù†Ø¬ Ø¨Ø§ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ùˆ Ø³ÛŒØ³ØªÙ… Ø¯Ø±Ø¢Ù…Ø¯Ø²Ø§ÛŒÛŒ</p>
        </div>
        
        <div class="game-area">
            <div class="chess-board-container">
                <h3 style="text-align: center; color: #4fc3f7; margin-bottom: 15px;">ØªØ®ØªÙ‡ Ø´Ø·Ø±Ù†Ø¬</h3>
                <div class="chess-board" id="chessBoard">
                    <!-- ØªØ®ØªÙ‡ Ø¨Ø§ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                </div>
                
                <div class="controls-row">
                    <button class="btn" onclick="startNewGame()">ğŸ”„ Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯</button>
                    <button class="btn btn-success" onclick="saveGame()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡</button>
                    <button class="btn" onclick="showHint()">ğŸ’¡ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ</button>
                </div>
            </div>
            
            <div class="controls-container">
                <div class="game-info">
                    <h3 style="color: #4fc3f7; margin-bottom: 15px;">ğŸ“Š ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§Ø²ÛŒ</h3>
                    
                    <div id="turnIndicator" class="turn-indicator white-turn">
                        Ù†ÙˆØ¨Øª: Ø´Ù…Ø§ (Ø³ÙÛŒØ¯)
                    </div>
                    
                    <div class="info-item">
                        <span>ÙˆØ¶Ø¹ÛŒØª:</span>
                        <span id="gameStatus">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø²ÛŒ</span>
                    </div>
                    
                    <div class="info-item">
                        <span>Ø­Ø±Ú©Øª:</span>
                        <span id="moveCount">0</span>
                    </div>
                    
                    <div class="info-item">
                        <span>Ø²Ù…Ø§Ù†:</span>
                        <span id="gameTime">00:00</span>
                    </div>
                    
                    <div class="info-item">
                        <span>Ø­Ø§Ù„Øª:</span>
                        <span id="gameMode">Ø¨Ø§ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</span>
                    </div>
                </div>
                
                <div class="game-controls">
                    <h3 style="color: #4fc3f7; margin-bottom: 15px;">ğŸ® Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§</h3>
                    
                    <div style="text-align: center;">
                        <button class="btn" onclick="playVsAI()">ğŸ¤– Ø¨Ø§Ø²ÛŒ Ø¨Ø§ AI</button>
                        <button class="btn" onclick="playVsHuman()">ğŸ‘¥ Ø¯Ùˆ Ù†ÙØ±Ù‡</button>
                        <button class="btn btn-danger" onclick="resignGame()">ğŸ³ï¸ ØªØ³Ù„ÛŒÙ…</button>
                        <button class="btn btn-premium" onclick="showPremium()">âœ¨ ÙˆÛŒÚ˜Ú¯ÛŒ Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ…</button>
                    </div>
                    
                    <div class="mobile-controls">
                        <button class="btn" style="font-size: 12px;" onclick="undoMove()">â†©ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª</button>
                        <button class="btn" style="font-size: 12px;" onclick="offerDraw()">ğŸ¤ ØªØ³Ø§ÙˆÛŒ</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="income-banner">
            <h2 style="margin-bottom: 15px;">ğŸ’° Ø¯Ø±Ø¢Ù…Ø¯ Ù…Ø§Ù‡Ø§Ù†Ù‡: Û²Û²Û¸,Û°Û°Û° ØªÙˆÙ…Ø§Ù†</h2>
            <p style="margin-bottom: 20px;">Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ø² Û³ Ø±ÙˆØ´ Ø¯Ø±Ø¢Ù…Ø¯Ø²Ø§ÛŒÛŒ Ø¯Ø§Ø±Ø¯:</p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 20px;">
                <div style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 10px;">
                    <div style="font-size: 1.5rem; color: #FFD700;">Û²Û¹,Û°Û°Û°</div>
                    <div style="font-size: 0.9rem;">Ø¹Ø¶ÙˆÛŒØª Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ…</div>
                </div>
                <div style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 10px;">
                    <div style="font-size: 1.5rem; color: #4CAF50;">Û±ÛµÛ°,Û°Û°Û°</div>
                    <div style="font-size: 0.9rem;">ØªØ¨Ù„ÛŒØºØ§Øª</div>
                </div>
                <div style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 10px;">
                    <div style="font-size: 1.5rem; color: #2196F3;">Û´Û¹,Û°Û°Û°</div>
                    <div style="font-size: 0.9rem;">ÙØ±ÙˆØ´ Ø³ÙˆØ±Ø³</div>
                </div>
            </div>
            
            <div style="margin-top: 20px;">
                <button class="btn btn-premium" onclick="buyPremium()" style="display: inline-block; width: auto; padding: 12px 25px; margin: 5px;">
                    ğŸ‘‘ Ø®Ø±ÛŒØ¯ Ø§Ø´ØªØ±Ø§Ú©
                </button>
                <button class="btn" onclick="learnMore()" style="display: inline-block; width: auto; padding: 12px 25px; margin: 5px; background: #333;">
                    ğŸ“š Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¯Ø±Ø¢Ù…Ø¯Ø²Ø§ÛŒÛŒ
                </button>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 25px;">
            <a href="/" class="back-btn">ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>
        </div>
    </div>
    
    <script>
        // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒ
        let board = [];
        let selectedPiece = null;
        let currentPlayer = 'white';
        let moveCount = 0;
        let gameMode = 'ai';
        let gameTime = 0;
        let timerInterval = null;
        let gameActive = true;
        
        // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ØªØ®ØªÙ‡
        function initBoard() {
            board = [];
            const pieces = ['â™–', 'â™˜', 'â™—', 'â™•', 'â™”', 'â™—', 'â™˜', 'â™–'];
            
            for(let row = 0; row < 8; row++) {
                board[row] = [];
                for(let col = 0; col < 8; col++) {
                    let piece = null;
                    let color = null;
                    
                    if(row === 0) {
                        color = 'black';
                        piece = ['â™œ', 'â™', 'â™', 'â™›', 'â™š', 'â™', 'â™', 'â™œ'][col];
                    }
                    else if(row === 1) {
                        color = 'black';
                        piece = 'â™Ÿ';
                    }
                    else if(row === 6) {
                        color = 'white';
                        piece = 'â™™';
                    }
                    else if(row === 7) {
                        color = 'white';
                        piece = pieces[col];
                    }
                    
                    board[row][col] = { piece: piece, color: color };
                }
            }
            
            renderBoard();
            updateGameInfo();
            startTimer();
        }
        
        // Ø±Ø³Ù… ØªØ®ØªÙ‡
        function renderBoard() {
            const boardEl = document.getElementById('chessBoard');
            let html = '<div class="board-grid">';
            
            for(let row = 0; row < 8; row++) {
                for(let col = 0; col < 8; col++) {
                    const cell = board[row][col];
                    const isDark = (row + col) % 2 === 0;
                    const cellClass = `board-square ${isDark ? 'dark-square' : 'light-square'}`;
                    const isSelected = selectedPiece && selectedPiece.row === row && selectedPiece.col === col;
                    
                    html += `<div class="${cellClass} ${isSelected ? 'selected-square' : ''}" 
                             data-row="${row}" data-col="${col}" 
                             onclick="cellClick(${row}, ${col})"
                             ontouchstart="cellClick(${row}, ${col})">
                             ${cell.piece || ''}</div>`;
                }
            }
            
            html += '</div>';
            boardEl.innerHTML = html;
        }
        
        // Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø®Ø§Ù†Ù‡
        function cellClick(row, col) {
            if(!gameActive) return;
            
            const cell = board[row][col];
            
            if(gameMode === 'ai' && currentPlayer === 'black') {
                showMessage('Ù†ÙˆØ¨Øª Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø§Ø³Øª!');
                return;
            }
            
            if(selectedPiece) {
                if(selectedPiece.row === row && selectedPiece.col === col) {
                    selectedPiece = null;
                    renderBoard();
                    return;
                }
                
                if(makeMove(selectedPiece.row, selectedPiece.col, row, col)) {
                    moveCount++;
                    currentPlayer = currentPlayer === 'white' ? 'black' : 'white';
                    updateGameInfo();
                    
                    if(gameMode === 'ai' && currentPlayer === 'black') {
                        setTimeout(makeAIMove, 800);
                    }
                    
                    selectedPiece = null;
                }
            } else if(cell.piece && cell.color === currentPlayer) {
                selectedPiece = { row: row, col: col, piece: cell.piece };
                renderBoard();
            }
        }
        
        // Ø§Ù†Ø¬Ø§Ù… Ø­Ø±Ú©Øª
        function makeMove(fromRow, fromCol, toRow, toCol) {
            const fromPiece = board[fromRow][fromCol];
            const toPiece = board[toRow][toCol];
            
            if(!toPiece.piece || toPiece.color !== fromPiece.color) {
                board[toRow][toCol] = { ...fromPiece };
                board[fromRow][fromCol] = { piece: null, color: null };
                renderBoard();
                
                // Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ
                checkGameStatus();
                return true;
            }
            
            return false;
        }
        
        // Ø­Ø±Ú©Øª Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ
        function makeAIMove() {
            if(currentPlayer !== 'black' || !gameActive) return;
            
            const blackPieces = [];
            for(let row = 0; row < 8; row++) {
                for(let col = 0; col < 8; col++) {
                    if(board[row][col].piece && board[row][col].color === 'black') {
                        blackPieces.push({ row, col });
                    }
                }
            }
            
            if(blackPieces.length === 0) return;
            
            const randomPiece = blackPieces[Math.floor(Math.random() * blackPieces.length)];
            const possibleMoves = [];
            
            const directions = [
                { dr: -1, dc: 0 }, { dr: 1, dc: 0 }, { dr: 0, dc: -1 }, { dr: 0, dc: 1 },
                { dr: -1, dc: -1 }, { dr: -1, dc: 1 }, { dr: 1, dc: -1 }, { dr: 1, dc: 1 }
            ];
            
            for(const dir of directions) {
                const newRow = randomPiece.row + dir.dr;
                const newCol = randomPiece.col + dir.dc;
                
                if(newRow >= 0 && newRow < 8 && newCol >= 0 && newCol < 8) {
                    const target = board[newRow][newCol];
                    if(!target.piece || target.color === 'white') {
                        possibleMoves.push({ fromRow: randomPiece.row, fromCol: randomPiece.col, toRow: newRow, toCol: newCol });
                    }
                }
            }
            
            if(possibleMoves.length > 0) {
                const randomMove = possibleMoves[Math.floor(Math.random() * possibleMoves.length)];
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ÙÚ©Ø± Ú©Ø±Ø¯Ù†
                document.getElementById('gameStatus').textContent = 'Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¯Ø± Ø­Ø§Ù„ ÙÚ©Ø± Ú©Ø±Ø¯Ù†...';
                
                setTimeout(() => {
                    makeMove(randomMove.fromRow, randomMove.fromCol, randomMove.toRow, randomMove.toCol);
                    moveCount++;
                    currentPlayer = 'white';
                    updateGameInfo();
                }, 600);
            }
        }
        
        // Ø´Ø±ÙˆØ¹ ØªØ§ÛŒÙ…Ø±
        function startTimer() {
            if(timerInterval) clearInterval(timerInterval);
            gameTime = 0;
            
            timerInterval = setInterval(() => {
                gameTime++;
                updateTimer();
            }, 1000);
        }
        
        // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ØªØ§ÛŒÙ…Ø±
        function updateTimer() {
            const minutes = Math.floor(gameTime / 60).toString().padStart(2, '0');
            const seconds = (gameTime % 60).toString().padStart(2, '0');
            document.getElementById('gameTime').textContent = `${minutes}:${seconds}`;
        }
        
        // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§Ø²ÛŒ
        function updateGameInfo() {
            document.getElementById('moveCount').textContent = moveCount;
            document.getElementById('gameMode').textContent = gameMode === 'ai' ? 'Ø¨Ø§ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ' : 'Ø¯Ùˆ Ù†ÙØ±Ù‡';
            
            const turnIndicator = document.getElementById('turnIndicator');
            if(gameMode === 'ai') {
                if(currentPlayer === 'white') {
                    turnIndicator.className = 'turn-indicator white-turn';
                    turnIndicator.textContent = 'Ù†ÙˆØ¨Øª: Ø´Ù…Ø§ (Ø³ÙÛŒØ¯)';
                    document.getElementById('gameStatus').textContent = 'Ù†ÙˆØ¨Øª Ø´Ù…Ø§Ø³Øª';
                } else {
                    turnIndicator.className = 'turn-indicator black-turn';
                    turnIndicator.textContent = 'Ù†ÙˆØ¨Øª: Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ (Ø³ÛŒØ§Ù‡)';
                }
            } else {
                if(currentPlayer === 'white') {
                    turnIndicator.className = 'turn-indicator white-turn';
                    turnIndicator.textContent = 'Ù†ÙˆØ¨Øª: Ø³ÙÛŒØ¯';
                } else {
                    turnIndicator.className = 'turn-indicator black-turn';
                    turnIndicator.textContent = 'Ù†ÙˆØ¨Øª: Ø³ÛŒØ§Ù‡';
                }
                document.getElementById('gameStatus').textContent = 'Ø¨Ø§Ø²ÛŒ Ø¯Ùˆ Ù†ÙØ±Ù‡';
            }
        }
        
        // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§Ø²ÛŒ
        function checkGameStatus() {
            let whiteKing = false;
            let blackKing = false;
            
            for(let row = 0; row < 8; row++) {
                for(let col = 0; col < 8; col++) {
                    if(board[row][col].piece === 'â™”') whiteKing = true;
                    if(board[row][col].piece === 'â™š') blackKing = true;
                }
            }
            
            if(!whiteKing) {
                endGame('Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯!');
                showPremiumAd('Ø¨Ø±Ø§ÛŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ù‚ÙˆÛŒâ€ŒØªØ± Ø§Ø´ØªØ±Ø§Ú© Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ… Ø¨Ø®Ø±ÛŒØ¯!');
            } else if(!blackKing) {
                endGame('Ø´Ù…Ø§ Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯ÛŒØ¯!');
            }
        }
        
        // Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ
        function endGame(message) {
            gameActive = false;
            clearInterval(timerInterval);
            showMessage(`ğŸ¯ ${message}`);
            document.getElementById('gameStatus').textContent = 'Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ';
        }
        
        // Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯
        function startNewGame() {
            if(gameActive && moveCount > 0) {
                if(!confirm('Ø¨Ø§Ø²ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù… Ø§Ø³Øª. Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯ØŸ')) {
                    return;
                }
            }
            
            gameActive = true;
            initBoard();
            currentPlayer = 'white';
            moveCount = 0;
            selectedPiece = null;
            updateGameInfo();
            showMessage('Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯ Ø´Ø±ÙˆØ¹ Ø´Ø¯!');
        }
        
        // Ø¨Ø§Ø²ÛŒ Ø¨Ø§ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ
        function playVsAI() {
            gameMode = 'ai';
            startNewGame();
            showMessage('Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø¨Ø§ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ');
        }
        
        // Ø¨Ø§Ø²ÛŒ Ø¯Ùˆ Ù†ÙØ±Ù‡
        function playVsHuman() {
            gameMode = 'human';
            startNewGame();
            showMessage('Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø¯Ùˆ Ù†ÙØ±Ù‡');
        }
        
        // Ø°Ø®ÛŒØ±Ù‡ Ø¨Ø§Ø²ÛŒ
        function saveGame() {
            const gameData = {
                board: board,
                currentPlayer: currentPlayer,
                moveCount: moveCount,
                time: gameTime,
                mode: gameMode
            };
            
            localStorage.setItem('chessGame', JSON.stringify(gameData));
            showMessage('Ø¨Ø§Ø²ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯!');
        }
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¨Ø§Ø²ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
        function loadGame() {
            const saved = localStorage.getItem('chessGame');
            if(saved) {
                if(confirm('Ø¨Ø§Ø²ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯. Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¢Ù† Ø±Ø§ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯ØŸ')) {
                    const gameData = JSON.parse(saved);
                    board = gameData.board;
                    currentPlayer = gameData.currentPlayer;
                    moveCount = gameData.moveCount;
                    gameTime = gameData.time;
                    gameMode = gameData.mode;
                    
                    renderBoard();
                    updateGameInfo();
                    startTimer();
                    showMessage('Ø¨Ø§Ø²ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯!');
                }
            }
        }
        
        // Ø¨Ø§Ø²Ú¯Ø´Øª Ø­Ø±Ú©Øª
        function undoMove() {
            showMessage('Ù‚Ø§Ø¨Ù„ÛŒØª Ø¨Ø§Ø²Ú¯Ø´Øª Ø­Ø±Ú©Øª Ø¯Ø± Ù†Ø³Ø®Ù‡ Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ… ÙØ¹Ø§Ù„ Ø§Ø³Øª!');
            showPremium();
        }
        
        // Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ØªØ³Ø§ÙˆÛŒ
        function offerDraw() {
            if(gameMode === 'ai') {
                if(confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¨Ù‡ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ØªØ³Ø§ÙˆÛŒ Ø¯Ù‡ÛŒØ¯ØŸ')) {
                    endGame('Ø¨Ø§Ø²ÛŒ Ù…Ø³Ø§ÙˆÛŒ Ø´Ø¯!');
                }
            } else {
                showMessage('Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ØªØ³Ø§ÙˆÛŒ Ø¨Ø±Ø§ÛŒ Ø­Ø±ÛŒÙ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯!');
            }
        }
        
        // ØªØ³Ù„ÛŒÙ… Ø´Ø¯Ù†
        function resignGame() {
            if(confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ØªØ³Ù„ÛŒÙ… Ø´ÙˆÛŒØ¯ØŸ')) {
                endGame(gameMode === 'ai' ? 'Ø´Ù…Ø§ ØªØ³Ù„ÛŒÙ… Ø´Ø¯ÛŒØ¯!' : 'Ø¨Ø§Ø²ÛŒÚ©Ù† ØªØ³Ù„ÛŒÙ… Ø´Ø¯!');
            }
        }
        
        // Ù†Ù…Ø§ÛŒØ´ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ
        function showHint() {
            const hints = [
                'Ù…Ø±Ú©Ø² ØªØ®ØªÙ‡ Ø±Ø§ Ú©Ù†ØªØ±Ù„ Ú©Ù†ÛŒØ¯',
                'Ù…Ù‡Ø±Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØªâ€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„ Ù…Ù†ØªÙ‚Ù„ Ú©Ù†ÛŒØ¯',
                'Ù‚Ù„Ø¹Ù‡â€ŒØ±ÙØªÙ† Ø±Ø§ ÙØ±Ø§Ù…ÙˆØ´ Ù†Ú©Ù†ÛŒØ¯',
                'Ù‡Ù…Ù‡ Ù…Ù‡Ø±Ù‡â€ŒÙ‡Ø§ÛŒØªØ§Ù† Ø±Ø§ Ø¯Ø± Ø¨Ø§Ø²ÛŒ Ø´Ø±Ú©Øª Ø¯Ù‡ÛŒØ¯'
            ];
            showMessage('ğŸ’¡ ' + hints[Math.floor(Math.random() * hints.length)]);
        }
        
        // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù…
        function showMessage(message) {
            alert(message);
        }
        
        // Ù†Ù…Ø§ÛŒØ´ ØªØ¨Ù„ÛŒØº Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ…
        function showPremiumAd(text = 'ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ØªØ± Ø¯Ø± Ù†Ø³Ø®Ù‡ Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ…!') {
            document.getElementById('gameStatus').innerHTML = 
                `ğŸ’ ${text} <button onclick="showPremium()" style="background:#FFD700;color:#333;border:none;padding:5px 10px;border-radius:5px;margin-right:5px;">Ù…Ø´Ø§Ù‡Ø¯Ù‡</button>`;
        }
        
        // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ…
        function showPremium() {
            const features = [
                'ğŸ¤– Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¨Ø§ Ûµ Ø³Ø·Ø­ Ø¯Ø´ÙˆØ§Ø±ÛŒ',
                'ğŸ“Š ØªØ­Ù„ÛŒÙ„ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¨Ø§Ø²ÛŒ',
                'ğŸ¬ Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§ÛŒ ÙˆÛŒØ¯ÛŒÙˆÛŒÛŒ',
                'â˜ï¸ Ø°Ø®ÛŒØ±Ù‡ Ø§Ø¨Ø±ÛŒ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯',
                'ğŸš« Ø­Ø°Ù ØªØ¨Ù„ÛŒØºØ§Øª',
                'ğŸ›¡ï¸ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Û²Û´ Ø³Ø§Ø¹ØªÙ‡'
            ];
            
            alert(`âœ¨ Ù†Ø³Ø®Ù‡ Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ… ØªØªØ±Ø§Ø´Ø§Ù¾\n\n${features.join('\n')}\n\nğŸ’ Ù‚ÛŒÙ…Øª: Û²Û¹,Û°Û°Û° ØªÙˆÙ…Ø§Ù† Ø¯Ø± Ù…Ø§Ù‡\n\nØ¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø¨Ù‡ ØµÙØ­Ù‡ Ø¯Ø±Ø¢Ù…Ø¯Ø²Ø§ÛŒÛŒ Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯.`);
            window.location.href = '/monetization';
        }
        
        // Ø®Ø±ÛŒØ¯ Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ…
        function buyPremium() {
            showPremium();
        }
        
        // Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¯Ø±Ø¢Ù…Ø¯Ø²Ø§ÛŒÛŒ
        function learnMore() {
            alert('ğŸ’° Ø³ÛŒØ³ØªÙ… Ø¯Ø±Ø¢Ù…Ø¯Ø²Ø§ÛŒÛŒ:\n\nÛ±. Ø§Ø´ØªØ±Ø§Ú© Ù¾Ø±ÛŒÙ…ÛŒÙˆÙ…: Û²Û¹,Û°Û°Û° ØªÙˆÙ…Ø§Ù†/Ù…Ø§Ù‡\nÛ². ØªØ¨Ù„ÛŒØºØ§Øª: Û±ÛµÛ°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†/Ù…Ø§Ù‡\nÛ³. ÙØ±ÙˆØ´ Ø³ÙˆØ±Ø³ Ú©Ø¯: Û´Û¹,Û°Û°Û° ØªÙˆÙ…Ø§Ù†\n\nğŸ¯ Ø¬Ù…Ø¹ Ø¯Ø±Ø¢Ù…Ø¯ Ù…Ø§Ù‡Ø§Ù†Ù‡: Û²Û²Û¸,Û°Û°Û° ØªÙˆÙ…Ø§Ù†');
            window.location.href = '/monetization';
        }
        
        // Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡
        window.onload = function() {
            initBoard();
            playVsAI();
            loadGame();
        };
    </script>
</body>
</html>
