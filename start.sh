#!/bin/bash

echo ""
echo "๐ ุฑุงูโุงูุฏุงุฒ TetraShop ุฏุฑ Termux"
echo "================================="

# ุฑูฺฏโูุง
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
RED='\033[0;31m'
NC='\033[0m'

# ุชููู ุณุฑูุฑูุง ูุจู
echo -e "${YELLOW}๐ ุชููู ุณุฑูุฑูุง ูุจู...${NC}"
pkill -f "node.*index.js" 2>/dev/null
sleep 2

# ุจุฑุฑุณ ูพูุฑุช
PORT=3000
echo -e "${BLUE}๐ ุจุฑุฑุณ ูพูุฑุช ${PORT}...${NC}"

# ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ
echo -e "${GREEN}๐ ุฏุฑ ุญุงู ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ...${NC}"
echo ""

# ุงุฌุฑุง ุณุฑูุฑ ุฏุฑ ูพุณโุฒููู
node index.js &
SERVER_PID=$!

# ุตุจุฑ ุจุฑุง ุฑุงูโุงูุฏุงุฒ
sleep 3

# ุจุฑุฑุณ ูุถุนุช ุณุฑูุฑ
echo ""
echo -e "${GREEN}โ ุณุฑูุฑ TetraShop ุฑุงูโุงูุฏุงุฒ ุดุฏ!${NC}"
echo ""
echo -e "${BLUE}๐ ุงุทูุงุนุงุช ุฏุณุชุฑุณ:${NC}"
echo "   ๐ ุตูุญู ุงุตู: ${GREEN}http://localhost:3000${NC}"
echo "   ๐ ุตูุญู ุงุตู: ${GREEN}http://127.0.0.1:3000${NC}"
echo "   โ๏ธ ุดุทุฑุฌุฏ:     ${GREEN}http://localhost:3000/chess${NC}"
echo ""
echo -e "${YELLOW}๐ข ูุทูุงู ูุฑูุฑฺฏุฑ ุฎูุฏ ุฑุง ุจุงุฒ ฺฉูุฏ ู ฺฉ ุงุฒ ุขุฏุฑุณโูุง ุจุงูุง ุฑุง ูุงุฑุฏ ฺฉูุฏ${NC}"
echo ""
echo -e "${BLUE}โ๏ธ  ฺฉูุชุฑู ุณุฑูุฑ:${NC}"
echo "   โข ุจุฑุง ูุชููู ฺฉุฑุฏู: ${RED}kill $SERVER_PID${NC}"
echo "   โข ุจุฑุง ุฏุฏู ูุงฺฏโูุง: ${YELLOW}tail -f nohup.out${NC}"
echo ""
echo "=".repeat(50)

# ููุชุธุฑ ุจูุงู
wait $SERVER_PID
