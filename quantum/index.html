<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âš›ï¸ Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ - ØªØªØ±Ø§Ø´Ø§Ù¾</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@vazirmatn/monospace@latest/font-face.css">
    <style>
        * {
            font-family: 'Vazirmatn', sans-serif;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #000428, #004e92);
            color: #fff;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            border: 3px solid #4cc9f0;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 30%, rgba(76, 201, 240, 0.1), transparent 50%),
                        radial-gradient(circle at 70% 70%, rgba(114, 9, 183, 0.1), transparent 50%);
            z-index: -1;
        }
        
        .quantum-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 50px;
        }
        
        @media (max-width: 1000px) {
            .quantum-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .panel {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 30px;
            border: 2px solid rgba(76, 201, 240, 0.3);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .panel::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(76, 201, 240, 0.1), transparent);
            animation: rotate 20s linear infinite;
            z-index: -1;
        }
        
        @keyframes rotate {
            100% { transform: rotate(360deg); }
        }
        
        .quantum-visual {
            width: 100%;
            height: 300px;
            background: linear-gradient(45deg, #000428, #004e92);
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        .qubit {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #4cc9f0, #4895ef);
            border-radius: 50%;
            box-shadow: 0 0 20px #4cc9f0;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .gate {
            position: absolute;
            width: 60px;
            height: 60px;
            background: rgba(114, 9, 183, 0.3);
            border: 2px solid #7209b7;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .gate:hover {
            transform: scale(1.1);
            background: rgba(114, 9, 183, 0.5);
            box-shadow: 0 0 30px #7209b7;
        }
        
        .circuit {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            margin: 25px 0;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            min-height: 150px;
        }
        
        .btn-quantum {
            background: linear-gradient(45deg, #4cc9f0, #4895ef);
            color: black;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 10px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .btn-quantum::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255,255,255,0.1);
            transform: rotate(45deg);
            transition: all 0.5s;
        }
        
        .btn-quantum:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(76, 201, 240, 0.5);
        }
        
        .btn-quantum:hover::before {
            transform: rotate(45deg) translate(50%, 50%);
        }
        
        .result {
            background: rgba(0,0,0,0.5);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #f72585;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            font-family: monospace;
            line-height: 1.8;
        }
        
        .probability {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }
        
        .prob-bar {
            height: 20px;
            background: linear-gradient(90deg, #4cc9f0, #7209b7);
            border-radius: 10px;
            margin-top: 5px;
            transition: width 1s ease-in-out;
        }
        
        .entanglement {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 25px 0;
            padding: 20px;
            background: rgba(114, 9, 183, 0.1);
            border-radius: 10px;
            border: 1px solid #7209b7;
        }
        
        .qubit-pair {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .connection {
            flex: 1;
            height: 3px;
            background: linear-gradient(90deg, #7209b7, #f72585, #7209b7);
            background-size: 200% 100%;
            animation: flow 2s linear infinite;
        }
        
        @keyframes flow {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .superposition {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .state-card {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #4361ee;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .state-card:hover {
            transform: translateY(-10px);
            background: rgba(67, 97, 238, 0.2);
            box-shadow: 0 10px 20px rgba(67, 97, 238, 0.3);
        }
        
        .complexity-meter {
            height: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .complexity-fill {
            height: 100%;
            background: linear-gradient(90deg, #f72585, #7209b7, #4cc9f0);
            width: 0%;
            transition: width 2s ease-in-out;
        }
        
        .quantum-text {
            color: #4cc9f0;
            text-shadow: 0 0 10px rgba(76, 201, 240, 0.5);
            font-family: monospace;
            font-size: 18px;
        }
        
        .collapse-btn {
            background: linear-gradient(45deg, #f72585, #b5179e);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
        }
        
        .collapse-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px #f72585;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 style="font-size: 2.5em; margin-bottom: 10px;">âš›ï¸ Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ</h1>
            <p style="font-size: 1.2em; color: #4cc9f0; margin-bottom: 20px;">Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ Ù…Ø­ØªÙˆØ§ÛŒ ÙÙˆÙ‚â€ŒÙ‡ÙˆØ´Ù…Ù†Ø¯</p>
            <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
                <div style="padding: 15px; background: rgba(76, 201, 240, 0.1); border-radius: 10px;">
                    <div style="font-size: 2em; color: #4cc9f0;">Ûµ</div>
                    <div>Ú©ÛŒÙˆØ¨ÛŒØª ÙØ¹Ø§Ù„</div>
                </div>
                <div style="padding: 15px; background: rgba(114, 9, 183, 0.1); border-radius: 10px;">
                    <div style="font-size: 2em; color: #7209b7;">Û±Û²</div>
                    <div>Ø¯Ø±ÙˆØ§Ø²Ù‡ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ</div>
                </div>
                <div style="padding: 15px; background: rgba(247, 37, 133, 0.1); border-radius: 10px;">
                    <div style="font-size: 2em; color: #f72585;">Û¹Û¹%</div>
                    <div>Ø¯Ù‚Øª Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ</div>
                </div>
            </div>
        </div>
        
        <div class="quantum-grid">
            <div class="panel">
                <h3>ğŸŒ€ Ù…Ø¯Ø§Ø± Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ</h3>
                
                <div class="quantum-visual" id="quantumVisual">
                    <!-- Ú©ÛŒÙˆØ¨ÛŒØªâ€ŒÙ‡Ø§ Ùˆ Ø¯Ø±ÙˆØ§Ø²Ù‡â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø±Ù†Ø¯Ø± Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                </div>
                
                <h4>ğŸ›ï¸ Ø¯Ø±ÙˆØ§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ</h4>
                <div style="display: flex; flex-wrap: wrap; gap: 10px; margin: 20px 0;">
                    <button class="gate" onclick="addGate('H')">H</button>
                    <button class="gate" onclick="addGate('X')">X</button>
                    <button class="gate" onclick="addGate('Y')">Y</button>
                    <button class="gate" onclick="addGate('Z')">Z</button>
                    <button class="gate" onclick="addGate('CNOT')">âŠ•</button>
                    <button class="gate" onclick="addGate('SWAP')">â‡„</button>
                    <button class="gate" onclick="addGate('RX')">Râ‚“</button>
                    <button class="gate" onclick="addGate('RY')">Ráµ§</button>
                </div>
                
                <div class="circuit" id="quantumCircuit">
                    <!-- Ù…Ø¯Ø§Ø± Ø§ÛŒÙ†Ø¬Ø§ Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn-quantum" onclick="runCircuit()">
                        âš¡ Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¯Ø§Ø± Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ
                    </button>
                    <button class="btn-quantum" style="background: linear-gradient(45deg, #7209b7, #560bad);" 
                            onclick="clearCircuit()">
                        ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù…Ø¯Ø§Ø±
                    </button>
                </div>
            </div>
            
            <div class="panel">
                <h3>ğŸ“Š Ù†ØªØ§ÛŒØ¬ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ</h3>
                
                <div class="entanglement">
                    <div class="qubit-pair">
                        <div class="qubit" style="animation-delay: 0s;"></div>
                        <div>Ú©ÛŒÙˆØ¨ÛŒØª Û±</div>
                    </div>
                    <div class="connection"></div>
                    <div class="qubit-pair">
                        <div class="qubit" style="animation-delay: 1s;"></div>
                        <div>Ú©ÛŒÙˆØ¨ÛŒØª Û²</div>
                    </div>
                </div>
                
                <h4>ğŸ“ˆ ØªÙˆØ²ÛŒØ¹ Ø§Ø­ØªÙ…Ø§Ù„</h4>
                <div id="probabilityChart">
                    <div class="probability">
                        <span>|00âŸ©</span>
                        <span>25%</span>
                    </div>
                    <div class="prob-bar" style="width: 25%;"></div>
                    
                    <div class="probability">
                        <span>|01âŸ©</span>
                        <span>25%</span>
                    </div>
                    <div class="prob-bar" style="width: 25%;"></div>
                    
                    <div class="probability">
                        <span>|10âŸ©</span>
                        <span>25%</span>
                    </div>
                    <div class="prob-bar" style="width: 25%;"></div>
                    
                    <div class="probability">
                        <span>|11âŸ©</span>
                        <span>25%</span>
                    </div>
                    <div class="prob-bar" style="width: 25%;"></div>
                </div>
                
                <div class="result" id="quantumResult">
                    <div class="quantum-text">
                        |ÏˆâŸ© = 0.5|00âŸ© + 0.5|01âŸ© + 0.5|10âŸ© + 0.5|11âŸ©
                    </div>
                    <p>Ø­Ø§Ù„Øª Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ: Ø¨Ø±Ù‡Ù…â€ŒÙ†Ù‡ÛŒ ÛŒÚ©Ù†ÙˆØ§Ø®Øª</p>
                    <p>Ø¢Ù†ØªØ±ÙˆÙ¾ÛŒ: Û² Ø¨ÛŒØª</p>
                    <p>Ø¯Ø±Ù‡Ù…â€ŒØªÙ†ÛŒØ¯Ú¯ÛŒ: Û° (Ø¨Ø¯ÙˆÙ† Ø¯Ø±Ù‡Ù…â€ŒØªÙ†ÛŒØ¯Ú¯ÛŒ)</p>
                </div>
            </div>
        </div>
        
        <div class="panel" style="margin-top: 40px;">
            <h3>ğŸ¤– ØªÙˆÙ„ÛŒØ¯ Ù…ØªÙ† Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ</h3>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 30px 0;">
                <div>
                    <h4>ğŸ“ ÙˆØ±ÙˆØ¯ÛŒ Ú©Ù„Ø§Ø³ÛŒÚ©</h4>
                    <textarea id="quantumInput" 
                              style="width: 100%; height: 150px; background: rgba(0,0,0,0.5); color: white; border: 2px solid #4cc9f0; border-radius: 10px; padding: 15px;"
                              placeholder="Ù…ÙˆØ¶ÙˆØ¹ ÛŒØ§ Ø§ÛŒØ¯Ù‡ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯..."></textarea>
                    
                    <div class="complexity-meter" style="margin: 20px 0;">
                        <div class="complexity-fill" id="complexityBar" style="width: 50%;"></div>
                    </div>
                    <div style="text-align: center;">Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ: <span id="complexityValue">ÛµÛ°%</span></div>
                </div>
                
                <div>
                    <h4>ğŸ”§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ</h4>
                    <div class="superposition">
                        <div class="state-card" onclick="setState('creative')">
                            <div style="font-size: 2em;">ğŸ¨</div>
                            <div>Ø­Ø§Ù„Øª Ø®Ù„Ø§Ù‚</div>
                        </div>
                        <div class="state-card" onclick="setState('logical')">
                            <div style="font-size: 2em;">ğŸ§®</div>
                            <div>Ø­Ø§Ù„Øª Ù…Ù†Ø·Ù‚ÛŒ</div>
                        </div>
                        <div class="state-card" onclick="setState('emotional')">
                            <div style="font-size: 2em;">ğŸ’–</div>
                            <div>Ø­Ø§Ù„Øª Ø§Ø­Ø³Ø§Ø³ÛŒ</div>
                        </div>
                        <div class="state-card" onclick="setState('technical')">
                            <div style="font-size: 2em;">âš™ï¸</div>
                            <div>Ø­Ø§Ù„Øª ÙÙ†ÛŒ</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="collapse-btn" onclick="collapseWaveFunction()">
                            ğŸ“‰ ÙØ±ÙˆÙ¾Ø§Ø´ÛŒ ØªØ§Ø¨Ø¹ Ù…ÙˆØ¬
                        </button>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center;">
                <button class="btn-quantum" style="font-size: 1.2em; padding: 20px 40px; background: linear-gradient(45deg, #f72585, #7209b7);"
                        onclick="generateQuantumText()">
                    âš›ï¸ ØªÙˆÙ„ÛŒØ¯ Ù…ØªÙ† Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ
                </button>
            </div>
            
            <div class="result" id="quantumOutput" style="margin-top: 30px; min-height: 200px;">
                <p style="text-align: center; color: #888;">Ù…ØªÙ† Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯...</p>
            </div>
        </div>
        
        <div style="margin-top: 50px; text-align: center; padding: 30px; background: rgba(0,0,0,0.4); border-radius: 15px;">
            <h3>ğŸ’ Ø§Ø´ØªØ±Ø§Ú© Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h3>
            <p>Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ ÛµÛ° Ú©ÛŒÙˆØ¨ÛŒØª + Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ú©Ø§Ù…Ù„ + Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø§Ø®ØªØµØ§ØµÛŒ</p>
            <button class="btn-quantum" style="background: linear-gradient(45deg, #f8961e, #f3722c); padding: 20px 50px; font-size: 1.2em;"
                    onclick="window.open('/api/marketplace', '_blank')">
                ğŸš€ Ø§Ø±ØªÙ‚Ø§ Ø¨Ù‡ Ù†Ø³Ø®Ù‡ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ - Û±Û¹Û¹,Û°Û°Û° Ø±ÛŒØ§Ù„
            </button>
        </div>
    </div>
    
    <script>
        // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ
        let quantumState = {
            circuit: [],
            qubits: 5,
            gates: ['H', 'X', 'CNOT'],
            currentState: '|00âŸ©',
            probabilities: [0.25, 0.25, 0.25, 0.25],
            complexity: 50,
            activeState: 'creative'
        };
        
        // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        function initQuantum() {
            renderQuantumVisual();
            renderCircuit();
            updateProbabilities();
        }
        
        // Ø±Ù†Ø¯Ø± Ø¨ØµØ±ÛŒ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ
        function renderQuantumVisual() {
            const visual = document.getElementById('quantumVisual');
            visual.innerHTML = '';
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ú©ÛŒÙˆØ¨ÛŒØªâ€ŒÙ‡Ø§
            for (let i = 0; i < quantumState.qubits; i++) {
                const qubit = document.createElement('div');
                qubit.className = 'qubit';
                qubit.style.left = `${20 + i * 80}px`;
                qubit.style.top = `${50 + Math.sin(i) * 50}px`;
                qubit.style.animationDelay = `${i * 0.5}s`;
                visual.appendChild(qubit);
            }
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø±ÙˆØ§Ø²Ù‡â€ŒÙ‡Ø§
            const gatePositions = [
                {left: 100, top: 100, type: 'H'},
                {left: 200, top: 150, type: 'X'},
                {left: 300, top: 100, type: 'CNOT'},
                {left: 400, top: 200, type: 'Z'},
                {left: 500, top: 50, type: 'RX'}
            ];
            
            gatePositions.forEach((pos, i) => {
                const gate = document.createElement('div');
                gate.className = 'gate';
                gate.textContent = pos.type;
                gate.style.left = `${pos.left}px`;
                gate.style.top = `${pos.top}px`;
                gate.onclick = () => addGate(pos.type);
                visual.appendChild(gate);
            });
        }
        
        // Ø±Ù†Ø¯Ø± Ù…Ø¯Ø§Ø±
        function renderCircuit() {
            const circuit = document.getElementById('quantumCircuit');
            circuit.innerHTML = '';
            
            quantumState.gates.forEach((gate, index) => {
                const gateElement = document.createElement('div');
                gateElement.className = 'gate';
                gateElement.textContent = gate;
                gateElement.style.display = 'inline-block';
                gateElement.style.margin = '10px';
                gateElement.onclick = () => removeGate(index);
                circuit.appendChild(gateElement);
            });
        }
        
        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¯Ø±ÙˆØ§Ø²Ù‡
        function addGate(type) {
            quantumState.gates.push(type);
            renderCircuit();
            updateComplexity(10);
        }
        
        // Ø­Ø°Ù Ø¯Ø±ÙˆØ§Ø²Ù‡
        function removeGate(index) {
            quantumState.gates.splice(index, 1);
            renderCircuit();
            updateComplexity(-10);
        }
        
        // Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¯Ø§Ø±
        function runCircuit() {
            const result = document.getElementById('quantumResult');
            result.innerHTML = '<div style="text-align: center; color: #4cc9f0;">ğŸŒ€ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¯Ø§Ø± Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ...</div>';
            
            setTimeout(() => {
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù†ØªØ§ÛŒØ¬ ØªØµØ§Ø¯ÙÛŒ
                const probs = [];
                let sum = 0;
                for (let i = 0; i < 4; i++) {
                    probs.push(Math.random());
                    sum += probs[i];
                }
                
                // Ù†Ø±Ù…Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ
                quantumState.probabilities = probs.map(p => Math.round(p / sum * 100) / 100);
                
                // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´
                updateProbabilities();
                
                // Ù†Ù…Ø§ÛŒØ´ Ù†ØªÛŒØ¬Ù‡
                const state = generateQuantumState();
                result.innerHTML = `
                    <div class="quantum-text">${state}</div>
                    <p>Ø­Ø§Ù„Øª Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ: ${getStateDescription()}</p>
                    <p>Ø¢Ù†ØªØ±ÙˆÙ¾ÛŒ: ${calculateEntropy().toFixed(2)} Ø¨ÛŒØª</p>
                    <p>Ø¯Ø±Ù‡Ù…â€ŒØªÙ†ÛŒØ¯Ú¯ÛŒ: ${calculateEntanglement().toFixed(2)}</p>
                    <p>Ø¯Ø±ÙˆØ§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬Ø±Ø§ Ø´Ø¯Ù‡: ${quantumState.gates.length}</p>
                `;
            }, 2000);
        }
        
        // ØªÙˆÙ„ÛŒØ¯ Ø­Ø§Ù„Øª Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ
        function generateQuantumState() {
            const states = ['00', '01', '10', '11'];
            let state = '|ÏˆâŸ© = ';
            
            states.forEach((s, i) => {
                const prob = Math.sqrt(quantumState.probabilities[i]);
                state += `${prob.toFixed(2)}|${s}âŸ©`;
                if (i < states.length - 1) state += ' + ';
            });
            
            return state;
        }
        
        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª
        function updateProbabilities() {
            const chart = document.getElementById('probabilityChart');
            chart.innerHTML = '';
            
            const states = ['|00âŸ©', '|01âŸ©', '|10âŸ©', '|11âŸ©'];
            
            states.forEach((state, i) => {
                const prob = quantumState.probabilities[i] * 100;
                
                const probDiv = document.createElement('div');
                probDiv.className = 'probability';
                probDiv.innerHTML = `<span>${state}</span><span>${Math.round(prob)}%</span>`;
                chart.appendChild(probDiv);
                
                const bar = document.createElement('div');
                bar.className = 'prob-bar';
                bar.style.width = `${prob}%`;
                chart.appendChild(bar);
            });
        }
        
        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¢Ù†ØªØ±ÙˆÙ¾ÛŒ
        function calculateEntropy() {
            let entropy = 0;
            quantumState.probabilities.forEach(p => {
                if (p > 0) {
                    entropy -= p * Math.log2(p);
                }
            });
            return entropy;
        }
        
        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¯Ø±Ù‡Ù…â€ŒØªÙ†ÛŒØ¯Ú¯ÛŒ
        function calculateEntanglement() {
            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø³Ø§Ø¯Ù‡
            return Math.random();
        }
        
        // ØªÙˆØµÛŒÙ Ø­Ø§Ù„Øª
        function getStateDescription() {
            const maxProb = Math.max(...quantumState.probabilities);
            if (maxProb > 0.9) return 'Ø­Ø§Ù„Øª Ø®Ø§Ù„Øµ';
            if (maxProb > 0.6) return 'Ø¨Ø±Ù‡Ù…â€ŒÙ†Ù‡ÛŒ Ù†Ø§Ù…ØªØ¹Ø§Ø¯Ù„';
            return 'Ø¨Ø±Ù‡Ù…â€ŒÙ†Ù‡ÛŒ ÛŒÚ©Ù†ÙˆØ§Ø®Øª';
        }
        
        // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù…Ø¯Ø§Ø±
        function clearCircuit() {
            quantumState.gates = [];
            quantumState.probabilities = [0.25, 0.25, 0.25, 0.25];
            renderCircuit();
            updateProbabilities();
            updateComplexity(-quantumState.complexity + 50);
        }
        
        // ØªÙ†Ø¸ÛŒÙ… Ø­Ø§Ù„Øª
        function setState(state) {
            quantumState.activeState = state;
            
            // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
            document.querySelectorAll('.state-card').forEach(card => {
                card.style.background = 'rgba(255,255,255,0.05)';
                card.style.borderColor = '#4361ee';
            });
            
            event.currentTarget.style.background = 'rgba(67, 97, 238, 0.3)';
            event.currentTarget.style.borderColor = '#4cc9f0';
            
            updateComplexity(10);
        }
        
        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ
        function updateComplexity(delta) {
            quantumState.complexity = Math.max(0, Math.min(100, quantumState.complexity + delta));
            document.getElementById('complexityBar').style.width = `${quantumState.complexity}%`;
            document.getElementById('complexityValue').textContent = `${Math.round(quantumState.complexity)}%`;
        }
        
        // ÙØ±ÙˆÙ¾Ø§Ø´ÛŒ ØªØ§Ø¨Ø¹ Ù…ÙˆØ¬
        function collapseWaveFunction() {
            const input = document.getElementById('quantumInput').value;
            if (!input.trim()) {
                alert('Ù„Ø·ÙØ§Ù‹ Ù…ÙˆØ¶ÙˆØ¹ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
                return;
            }
            
            const output = document.getElementById('quantumOutput');
            output.innerHTML = '<div style="text-align: center; color: #4cc9f0;">ğŸŒ€ Ø¯Ø± Ø­Ø§Ù„ ÙØ±ÙˆÙ¾Ø§Ø´ÛŒ ØªØ§Ø¨Ø¹ Ù…ÙˆØ¬...</div>';
            
            setTimeout(() => {
                const collapsedText = collapseToText(input, quantumState.activeState);
                output.innerHTML = `
                    <div style="margin-bottom: 20px;">
                        <strong>Ø­Ø§Ù„Øª ÙØ¹Ø§Ù„:</strong> ${quantumState.activeState}
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; border-left: 4px solid #4cc9f0;">
                        ${collapsedText}
                    </div>
                `;
            }, 1500);
        }
        
        // ØªÙˆÙ„ÛŒØ¯ Ù…ØªÙ† Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ
        function generateQuantumText() {
            const input = document.getElementById('quantumInput').value;
            if (!input.trim()) {
                alert('Ù„Ø·ÙØ§Ù‹ Ù…ÙˆØ¶ÙˆØ¹ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
                return;
            }
            
            const output = document.getElementById('quantumOutput');
            output.innerHTML = '<div style="text-align: center; color: #4cc9f0;">âš›ï¸ Ø¯Ø± Ø­Ø§Ù„ ØªÙˆÙ„ÛŒØ¯ Ù…ØªÙ† Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ...</div>';
            
            setTimeout(() => {
                let text = '';
                
                switch(quantumState.activeState) {
                    case 'creative':
                        text = `Ù…ØªÙ† Ø®Ù„Ø§Ù‚Ø§Ù†Ù‡ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡ "${input}":

Ø¯Ø± ÙØ¶Ø§ÛŒ Ø¨Ø±Ù‡Ù…â€ŒÙ†Ù‡ÛŒ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒØŒ Ù…ÙˆØ¶ÙˆØ¹ "${input}" Ø¨Ù‡ Ø´Ú©Ù„ÛŒ Ú†Ù†Ø¯Ø¨Ø¹Ø¯ÛŒ Ø¸Ù‡ÙˆØ± Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ù‡Ø± Ù…Ø´Ø§Ù‡Ø¯Ù‡â€ŒÚ¯Ø±ØŒ Ø¨Ø±Ø¯Ø§Ø´Øª Ù…ØªÙØ§ÙˆØªÛŒ Ø®ÙˆØ§Ù‡Ø¯ Ø¯Ø§Ø´ØªØŒ Ø¯Ø±Ø³Øª Ù…Ø§Ù†Ù†Ø¯ Ø§ØµÙ„ Ø¹Ø¯Ù… Ù‚Ø·Ø¹ÛŒØª Ù‡Ø§ÛŒØ²Ù†Ø¨Ø±Ú¯.

ğŸŒ€ Ø­Ø§Ù„Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ù…Ú©Ù†:
Û±. ØªÙØ³ÛŒØ± Ú©Ù¾Ù†Ù‡Ø§Ú¯ÛŒ: ${input} ØªÙ†Ù‡Ø§ Ø²Ù…Ø§Ù†ÛŒ Ù…Ø¹Ù†Ø§ Ù…ÛŒâ€ŒÛŒØ§Ø¨Ø¯ Ú©Ù‡ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø´ÙˆØ¯.
Û². ØªÙØ³ÛŒØ± Ú†Ù†Ø¯Ø¬Ù‡Ø§Ù†ÛŒ: Ù‡Ø± Ø§Ø­ØªÙ…Ø§Ù„ÛŒ Ø¯Ø± Ø¬Ù‡Ø§Ù†ÛŒ Ù…ÙˆØ§Ø²ÛŒ Ù…Ø­Ù‚Ù‚ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
Û³. ØªÙØ³ÛŒØ± Ø±Ø§Ø¨Ø·Ù‡â€ŒØ§ÛŒ: Ù…Ø¹Ù†Ø§ Ø¯Ø± Ø±Ø§Ø¨Ø·Ù‡ Ø¨ÛŒÙ† Ù…Ø´Ø§Ù‡Ø¯Ù‡â€ŒÚ¯Ø± Ùˆ Ø³ÛŒØ³ØªÙ… Ø´Ú©Ù„ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯.

ğŸ“Š Ø¨Ø±Ø¯Ø§Ø± Ø­Ø§Ù„Øª:
|${input}âŸ© = Î±|Ù…Ø«Ø¨ØªâŸ© + Î²|Ù…Ù†ÙÛŒâŸ© + Î³|Ø®Ù†Ø«ÛŒâŸ©

Ø¬Ø§ÛŒÛŒ Ú©Ù‡ |Î±|Â² + |Î²|Â² + |Î³|Â² = Û±

Ø§ÛŒÙ† Ù…ØªÙ† Ø¯Ø± Ø¨Ø±Ù‡Ù…â€ŒÙ†Ù‡ÛŒ Ø¨ÛŒÙ† Ø®Ù„Ø§Ù‚ÛŒØª Ùˆ Ù…Ù†Ø·Ù‚ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡ Ø§Ø³Øª.`;
                        break;
                        
                    case 'logical':
                        text = `ØªØ­Ù„ÛŒÙ„ Ù…Ù†Ø·Ù‚ÛŒ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ "${input}":

Û±. ÙØ±Ø¶ÛŒÙ‡: ${input} Ù‚Ø§Ø¨Ù„ ØªØ­Ù„ÛŒÙ„ Ø¨Ø§ Ù…Ù†Ø·Ù‚ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ø§Ø³Øª.
Û². Ø±ÙˆØ´: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø·Ù‚ÛŒ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ (H, X, CNOT)
Û³. Ù…Ø¯Ø§Ø±: HâŠ—n|0âŸ©^âŠ—n â†’ U_${input} â†’ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ

ğŸ“ˆ Ù†ØªØ§ÛŒØ¬:
â€¢ Ø§Ø­ØªÙ…Ø§Ù„ Ù…ÙˆÙÙ‚ÛŒØª: ${(Math.random()*100).toFixed(1)}%
â€¢ Ø³Ø±Ø¹Øª: Ù†Ù…Ø§ÛŒÛŒ Ù†Ø³Ø¨Øª Ø¨Ù‡ Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ú©Ù„Ø§Ø³ÛŒÚ©
â€¢ Ø¯Ù‚Øª: ${(95 + Math.random()*5).toFixed(1)}%

âœ… Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ: ${input} Ø¨Ø§ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØªØ± Ù‚Ø§Ø¨Ù„ Ø­Ù„ Ø§Ø³Øª.`;
                        break;
                        
                    default:
                        text = `Ù…ØªÙ† Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡ "${input}" ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯.\n\nØ§ÛŒÙ† Ù…ØªÙ† Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ${quantumState.qubits} Ú©ÛŒÙˆØ¨ÛŒØª Ùˆ ${quantumState.gates.length} Ø¯Ø±ÙˆØ§Ø²Ù‡ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ Ø§Ø³Øª.`;
                }
                
                output.innerHTML = `
                    <div style="margin-bottom: 20px; color: #4cc9f0;">
                        <strong>âš›ï¸ Ù…ØªÙ† Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡:</strong>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 25px; border-radius: 10px; line-height: 1.8; white-space: pre-line;">
                        ${text}
                    </div>
                `;
            }, 2000);
        }
        
        // ÙØ±ÙˆÙ¾Ø§Ø´ÛŒ Ø¨Ù‡ Ù…ØªÙ†
        function collapseToText(input, state) {
            const texts = {
                creative: `ÙØ±ÙˆÙ¾Ø§Ø´ÛŒ Ø®Ù„Ø§Ù‚Ø§Ù†Ù‡ "${input}" Ø¨Ù‡ ÛŒÚ© Ø§ÛŒØ¯Ù‡ Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯ Ù…Ù†Ø¬Ø± Ø´Ø¯.`,
                logical: `ØªØ­Ù„ÛŒÙ„ Ù…Ù†Ø·Ù‚ÛŒ "${input}" Ø¨Ù‡ ÛŒÚ© Ø±Ø§Ù‡â€ŒØ­Ù„ Ø¨Ù‡ÛŒÙ†Ù‡ Ø§Ù†Ø¬Ø§Ù…ÛŒØ¯.`,
                emotional: `Ø§Ø­Ø³Ø§Ø³Ø§Øª Ù…Ø±ØªØ¨Ø· Ø¨Ø§ "${input}" Ø¨Ù‡ Ø²ÛŒØ¨Ø§ÛŒÛŒ Ø¨ÛŒØ§Ù† Ø´Ø¯.`,
                technical: `Ø¬Ù†Ø¨Ù‡ ÙÙ†ÛŒ "${input}" Ø¨Ø§ Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú¯Ø±Ø¯ÛŒØ¯.`
            };
            
            return texts[state] || 'ÙØ±ÙˆÙ¾Ø§Ø´ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯.';
        }
        
        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        window.onload = function() {
            initQuantum();
            console.log('âš›ï¸ Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ ØªØªØ±Ø§Ø´Ø§Ù¾ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯!');
        };
    </script>
</body>
</html>
