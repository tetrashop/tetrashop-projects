<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ØªØ¨Ø¯ÛŒÙ„ ØªØµÙˆÛŒØ± Û²D Ø¨Ù‡ Û³D - ØªØªØ±Ø§Ø´Ø§Ù¾</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2rem;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .upload-area {
            border: 3px dashed #3498db;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }
        
        .upload-area:hover {
            background: #e3f2fd;
            border-color: #2980b9;
        }
        
        .upload-icon {
            font-size: 60px;
            color: #3498db;
            margin-bottom: 15px;
        }
        
        .upload-text {
            font-size: 18px;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .upload-note {
            color: #7f8c8d;
            font-size: 14px;
            margin-top: 10px;
        }
        
        .preview-section {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin: 30px 0;
        }
        
        .preview-box, .result-box {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .preview-box h3, .result-box h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        #image-preview {
            width: 100%;
            min-height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #f8f9fa;
            border-radius: 8px;
            overflow: hidden;
        }
        
        #result {
            min-height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #f8f9fa;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .btn-secondary {
            background: #2ecc71;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #27ae60;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }
        
        .btn-reset {
            background: #e74c3c;
            color: white;
        }
        
        .btn-reset:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }
        
        .info-section {
            background: #e8f4fc;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            border-right: 5px solid #3498db;
        }
        
        .info-section h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .info-section ul {
            padding-left: 20px;
        }
        
        .info-section li {
            margin-bottom: 8px;
            color: #555;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        /* Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .preview-section {
                flex-direction: column;
            }
            
            .upload-area {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            button {
                width: 100%;
                margin-bottom: 10px;
            }
        }
        
        /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¨Ø±Ø§ÛŒ Ù„ÙˆØ¯Ø± */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ”„ ØªØ¨Ø¯ÛŒÙ„ ØªØµÙˆÛŒØ± Ø¯Ùˆ Ø¨Ø¹Ø¯ÛŒ Ø¨Ù‡ Ù…Ø¯Ù„ Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ</h1>
            <p class="subtitle">Ø¢Ù¾Ù„ÙˆØ¯ ØªØµÙˆÛŒØ± Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯ Ùˆ Ù…Ø¯Ù„ Û³D Ø¢Ù† Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯</p>
        </header>
        
        <div class="upload-area" id="upload-area">
            <div class="upload-icon">ğŸ“¤</div>
            <p class="upload-text">Ø¨Ø±Ø§ÛŒ Ø¢Ù¾Ù„ÙˆØ¯ ØªØµÙˆÛŒØ± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø¢Ù† Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø±Ù‡Ø§ Ú©Ù†ÛŒØ¯</p>
            <input type="file" id="image-input" accept="image/jpeg,image/png,image/jpg,image/webp" style="display: none;">
            <p class="upload-note">ÙØ±Ù…Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø¬Ø§Ø²: JPG, PNG, WebP (Ø­Ø¯Ø§Ú©Ø«Ø± Û±Û° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª)</p>
        </div>
        
        <div class="preview-section">
            <div class="preview-box">
                <h3>ğŸ‘ï¸ ØªØµÙˆÛŒØ± Ø¢Ù¾Ù„ÙˆØ¯ Ø´Ø¯Ù‡</h3>
                <div id="image-preview">
                    <p>Ù‡Ù†ÙˆØ² ØªØµÙˆÛŒØ±ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>
                </div>
            </div>
            
            <div class="result-box">
                <h3>ğŸ¨ Ù…Ø¯Ù„ Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ</h3>
                <div id="result">
                    <p>Ù¾Ø³ Ø§Ø² Ø¢Ù¾Ù„ÙˆØ¯ØŒ Ù…Ø¯Ù„ Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <button id="process-btn" class="btn-primary" disabled>
                âš™ï¸ Ø´Ø±ÙˆØ¹ Ù¾Ø±Ø¯Ø§Ø²Ø´
            </button>
            <button id="download-btn" class="btn-secondary" disabled>
                ğŸ’¾ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù…Ø¯Ù„
            </button>
            <button id="reset-btn" class="btn-reset">
                ğŸ”„ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯
            </button>
        </div>
        
        <div class="info-section">
            <h4>ğŸ’¡ Ù†Ú©Ø§Øª Ù…Ù‡Ù…:</h4>
            <ul>
                <li>ØªØµØ§ÙˆÛŒØ± Ø¨Ø§ Ú©Ù†ØªØ±Ø§Ø³Øª Ø¨Ø§Ù„Ø§ Ù†ØªØ§ÛŒØ¬ Ø¨Ù‡ØªØ±ÛŒ ØªÙˆÙ„ÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯</li>
                <li>Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø³Ø±ÛŒØ¹â€ŒØªØ±ØŒ ØªØµØ§ÙˆÛŒØ± Ø¨Ø§ Ø³Ø§ÛŒØ² Ú©ÙˆÚ†Ú©â€ŒØªØ± Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯</li>
                <li>Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…Ù…Ú©Ù† Ø§Ø³Øª Û±Û°-Û³Û° Ø«Ø§Ù†ÛŒÙ‡ Ø²Ù…Ø§Ù† Ø¨Ø¨Ø±Ø¯</li>
                <li>Ù…Ø¯Ù„ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡ Ø¯Ø± ÙØ±Ù…Øª OBJ Ù‚Ø§Ø¨Ù„ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯</li>
                <li>Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù…Ø¯Ù„ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ WebGL Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ø§Ø³Øª</li>
            </ul>
        </div>
        
        <footer>
            <p>ØªØ¨Ø¯ÛŒÙ„ ØªØµÙˆÛŒØ± Û²D Ø¨Ù‡ Û³D - Ù¾Ø±ÙˆÚ˜Ù‡ ØªØªØ±Ø§Ø´Ø§Ù¾ | Ù†Ø³Ø®Ù‡ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ´Ø¯Ù‡</p>
            <p>Ø¯Ø±Ø¢Ù…Ø¯ Ù…Ø§Ù‡Ø§Ù†Ù‡ Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡: Û²Û²Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†</p>
        </footer>
    </div>
    
    <!-- Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Three.js Ø§Ø² CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø§ -->
    <script src="fix-freeze-issue.js"></script>
    
    <script>
        // Ù…Ø¯ÛŒØ±ÛŒØª Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§
        document.getElementById('upload-area').addEventListener('click', () => {
            document.getElementById('image-input').click();
        });
        
        document.getElementById('image-input').addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                document.getElementById('process-btn').disabled = false;
                document.getElementById('process-btn').classList.remove('pulse');
            }
        });
        
        document.getElementById('process-btn').addEventListener('click', () => {
            const fileInput = document.getElementById('image-input');
            if (!fileInput.files[0]) {
                alert('Ù„Ø·ÙØ§ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© ØªØµÙˆÛŒØ± Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
            document.getElementById('process-btn').classList.add('pulse');
            document.getElementById('process-btn').innerHTML = 'â³ Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´...';
            document.getElementById('process-btn').disabled = true;
            
            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ (Ø¯Ø± Ù†Ø³Ø®Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯)
            setTimeout(() => {
                // Ù†Ù…Ø§ÛŒØ´ Ù†ØªÛŒØ¬Ù‡
                document.getElementById('result').innerHTML = `
                    <div style="text-align: center;">
                        <div style="font-size: 50px; margin-bottom: 10px;">âœ…</div>
                        <h3>Ù…Ø¯Ù„ Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯!</h3>
                        <p>Ù…Ø¯Ù„ Ø¯Ø± Ø­Ø§Ù„ Ù†Ù…Ø§ÛŒØ´ Ø§Ø³Øª</p>
                    </div>
                `;
                
                document.getElementById('download-btn').disabled = false;
                document.getElementById('process-btn').classList.remove('pulse');
                document.getElementById('process-btn').innerHTML = 'âœ… Ù¾Ø±Ø¯Ø§Ø²Ø´ Ú©Ø§Ù…Ù„ Ø´Ø¯';
                
                // Ø§ÛŒØ¬Ø§Ø¯ ÛŒÚ© Ù…Ø¯Ù„ Û³D Ø³Ø§Ø¯Ù‡
                if (typeof THREE !== 'undefined') {
                    initSimple3DModel();
                }
            }, 2000);
        });
        
        document.getElementById('download-btn').addEventListener('click', () => {
            alert('Ù…Ø¯Ù„ Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯ (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)');
        });
        
        document.getElementById('reset-btn').addEventListener('click', () => {
            if (confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø² Ù†Ùˆ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯ØŸ')) {
                location.reload();
            }
        });
        
        // Ø¯Ø±Ø§Ú¯ Ùˆ Ø¯Ø±Ø§Ù¾
        const uploadArea = document.getElementById('upload-area');
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#2ecc71';
            uploadArea.style.background = '#d5f4e6';
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = '#3498db';
            uploadArea.style.background = '#f8f9fa';
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#3498db';
            uploadArea.style.background = '#f8f9fa';
            
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) {
                document.getElementById('image-input').files = e.dataTransfer.files;
                
                // ØªØ±ÛŒÚ¯Ø± event change
                const event = new Event('change');
                document.getElementById('image-input').dispatchEvent(event);
                
                document.getElementById('process-btn').disabled = false;
                document.getElementById('process-btn').classList.remove('pulse');
            } else {
                alert('Ù„Ø·ÙØ§ ÙÙ‚Ø· ØªØµÙˆÛŒØ± Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯');
            }
        });
        
        // Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø¯Ù„ Û³D Ø³Ø§Ø¯Ù‡
        function initSimple3DModel() {
            const container = document.getElementById('result');
            container.innerHTML = '<div id="model-viewer" style="width:100%;height:300px;"></div>';
            
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            
            renderer.setSize(300, 300);
            document.getElementById('model-viewer').appendChild(renderer.domElement);
            
            // Ù†ÙˆØ±
            const light = new THREE.DirectionalLight(0xffffff, 1);
            light.position.set(5, 5, 5);
            scene.add(light);
            
            const ambientLight = new THREE.AmbientLight(0x404040);
            scene.add(ambientLight);
            
            // Ø§ÛŒØ¬Ø§Ø¯ ÛŒÚ© Ù…Ø¯Ù„ Ø³Ø§Ø¯Ù‡ (Ù…Ú©Ø¹Ø¨ Ø¨Ø§ Ø¨Ø§ÙØª)
            const geometry = new THREE.BoxGeometry(1, 1, 1);
            const material = new THREE.MeshPhongMaterial({ color: 0x3498db });
            const cube = new THREE.Mesh(geometry, material);
            scene.add(cube);
            
            camera.position.z = 3;
            
            // Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
            function animate() {
                requestAnimationFrame(animate);
                cube.rotation.x += 0.01;
                cube.rotation.y += 0.01;
                renderer.render(scene, camera);
            }
            animate();
        }
    </script>
</body>
</html>
