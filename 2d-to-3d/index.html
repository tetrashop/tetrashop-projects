<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<link rel="stylesheet" href="/projects-override.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ØªØ¨Ø¯ÛŒÙ„ ØªØµÙˆÛŒØ± Û²D Ø¨Ù‡ Û³D - Ù†Ø³Ø®Ù‡ Ú©Ø§Ù…Ù„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f9fafb;
        }
        
        body {
            font-family: 'Vazir', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
            color: var(--dark);
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: var(--dark);
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            color: #6b7280;
            font-size: 1.1rem;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            flex: 1;
            min-width: 150px;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: var(--light);
            color: var(--dark);
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .tab-btn.active {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .upload-section {
            border: 3px dashed var(--primary);
            border-radius: 15px;
            padding: 40px 20px;
            text-align: center;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(102, 126, 234, 0.05);
        }
        
        .upload-section:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: var(--secondary);
        }
        
        .upload-icon {
            font-size: 70px;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .camera-preview {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            border-radius: 15px;
            overflow: hidden;
            background: white;
            position: relative;
        }
        
        #camera-stream {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .camera-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            min-width: 150px;
            justify-content: center;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background: #0da271;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        
        .btn-warning:hover {
            background: #dd8b0d;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.4);
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background: #dc2626;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.4);
        }
        
        .preview-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }
        
        .preview-box {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .preview-box h3 {
            margin-bottom: 20px;
            color: var(--dark);
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        #image-preview, #result-3d {
            min-height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: var(--light);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-container {
            background: var(--light);
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
            display: none;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid rgba(0, 0, 0, 0.05);
        }
        
        .stat-box {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 5px solid var(--primary);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #6b7280;
            font-size: 14px;
        }
        
        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid var(--danger);
            color: var(--danger);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }
        
        .success-message {
            background: rgba(16, 185, 129, 0.1);
            border: 2px solid var(--success);
            color: var(--success);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid rgba(0, 0, 0, 0.05);
            color: #6b7280;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .preview-container {
                grid-template-columns: 1fr;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 10px;
            }
        }
        
        /* Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØª Ø¯ÙˆØ±Ø¨ÛŒÙ† */
        .camera-status {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
        }
    </style>
    
    <!-- ÙÙˆÙ†Øª ÙˆØ²ÛŒØ± Ø¨Ø±Ø§ÛŒ ÙØ§Ø±Ø³ÛŒ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css">
    
    <!-- Three.js Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Û³D -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ”„ ØªØ¨Ø¯ÛŒÙ„ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ ØªØµÙˆÛŒØ± Û²D Ø¨Ù‡ Ù…Ø¯Ù„ Û³D</h1>
            <p class="subtitle">Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¯ÙˆØ±Ø¨ÛŒÙ†ØŒ Ú¯Ø§Ù„Ø±ÛŒ Ùˆ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø§Ø¨Ø±ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</p>
        </header>
        
        <div class="tabs">
            <button class="tab-btn active" data-tab="camera">
                ğŸ“· Ø¯ÙˆØ±Ø¨ÛŒÙ†
            </button>
            <button class="tab-btn" data-tab="gallery">
                ğŸ–¼ï¸ Ú¯Ø§Ù„Ø±ÛŒ
            </button>
            <button class="tab-btn" data-tab="upload">
                â˜ï¸ Ø¢Ù¾Ù„ÙˆØ¯ Ø§Ø¨Ø±ÛŒ
            </button>
        </div>
        
        <!-- ØªØ¨ Ø¯ÙˆØ±Ø¨ÛŒÙ† -->
        <div id="camera-tab" class="tab-content active">
            <div class="upload-section" id="camera-container">
                <div class="upload-icon">ğŸ“¸</div>
                <h2>Ø¹Ú©Ø³â€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ Ø¨Ø§ Ø¯ÙˆØ±Ø¨ÛŒÙ†</h2>
                <p>Ø§Ø² Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø®ÙˆØ¯ Ø¨Ø±Ø§ÛŒ Ø¹Ú©Ø³â€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</p>
                
                <div class="camera-preview">
                    <div class="camera-status" id="camera-status">âŒ Ø¯ÙˆØ±Ø¨ÛŒÙ† ØºÛŒØ±ÙØ¹Ø§Ù„</div>
                    <video id="camera-stream" autoplay playsinline></video>
                </div>
                
                <div class="camera-controls">
                    <button id="start-camera" class="btn btn-success">
                        â–¶ï¸ Ø±ÙˆØ´Ù† Ú©Ø±Ø¯Ù† Ø¯ÙˆØ±Ø¨ÛŒÙ†
                    </button>
                    <button id="capture-btn" class="btn btn-primary" disabled>
                        ğŸ“¸ Ø¹Ú©Ø³ Ø¨Ú¯ÛŒØ±
                    </button>
                    <button id="stop-camera" class="btn btn-danger" disabled>
                        â¹ï¸ Ø®Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù† Ø¯ÙˆØ±Ø¨ÛŒÙ†
                    </button>
                </div>
                
                <canvas id="camera-canvas" style="display: none;"></canvas>
            </div>
        </div>
        
        <!-- ØªØ¨ Ú¯Ø§Ù„Ø±ÛŒ -->
        <div id="gallery-tab" class="tab-content">
            <div class="upload-section" id="gallery-container">
                <div class="upload-icon">ğŸ–¼ï¸</div>
                <h2>Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø² Ú¯Ø§Ù„Ø±ÛŒ</h2>
                <p>ØªØµÙˆÛŒØ± Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø² Ú¯Ø§Ù„Ø±ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</p>
                
                <input type="file" id="gallery-input" accept="image/*" style="display: none;">
                
                <button id="choose-gallery" class="btn btn-primary btn-lg pulse">
                    ğŸ–¼ï¸ Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø² Ú¯Ø§Ù„Ø±ÛŒ
                </button>
                
                <div style="margin-top: 20px;">
                    <p><strong>âš ï¸ Ù†Ú©Ø§Øª Ù…Ù‡Ù…:</strong></p>
                    <ul style="text-align: right; margin-right: 20px;">
                        <li>Ø­Ø¯Ø§Ú©Ø«Ø± Ø­Ø¬Ù… ÙØ§ÛŒÙ„: Û±Û° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª</li>
                        <li>ÙØ±Ù…Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø¬Ø§Ø²: JPG, PNG, WebP</li>
                        <li>ØªØµØ§ÙˆÛŒØ± Ø¨Ø§ Ú©ÛŒÙÛŒØª Ø¨Ø§Ù„Ø§ Ù†ØªØ§ÛŒØ¬ Ø¨Ù‡ØªØ±ÛŒ Ù…ÛŒâ€ŒØ¯Ù‡Ù†Ø¯</li>
                        <li>ØªØµØ§ÙˆÛŒØ± Ø¨Ø§ Ú©Ù†ØªØ±Ø§Ø³Øª Ø¨Ø§Ù„Ø§ Ø¨Ù‡ØªØ± Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- ØªØ¨ Ø¢Ù¾Ù„ÙˆØ¯ Ø§Ø¨Ø±ÛŒ -->
        <div id="upload-tab" class="tab-content">
            <div class="upload-section">
                <div class="upload-icon">â˜ï¸</div>
                <h2>Ø¢Ù¾Ù„ÙˆØ¯ Ø§Ø¨Ø±ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h2>
                <p>Ø¢Ù¾Ù„ÙˆØ¯ Ù…Ø³ØªÙ‚ÛŒÙ… Ø§Ø² Ù„ÛŒÙ†Ú© URL ÛŒØ§ Ø®Ø¯Ù…Ø§Øª Ø§Ø¨Ø±ÛŒ</p>
                
                <div style="margin: 30px 0;">
                    <input type="url" id="image-url" 
                           placeholder="https://example.com/image.jpg" 
                           style="width: 100%; padding: 15px; border: 2px solid var(--primary); border-radius: 10px; font-size: 16px;">
                    
                    <button id="fetch-url" class="btn btn-primary" style="margin-top: 15px; width: 100%;">
                        ğŸ”„ Ø¯Ø±ÛŒØ§ÙØª ØªØµÙˆÛŒØ± Ø§Ø² Ù„ÛŒÙ†Ú©
                    </button>
                </div>
                
                <div class="success-message" id="premium-message">
                    <strong>ğŸ’ Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡ ÙØ¹Ø§Ù„ Ø§Ø³Øª!</strong>
                    <p>Ø´Ù…Ø§ Ø¨Ù‡ ØªÙ…Ø§Ù… Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø±ÛŒØ¯:</p>
                    <ul style="text-align: right; margin-right: 20px; margin-top: 10px;">
                        <li>Ù¾Ø±Ø¯Ø§Ø²Ø´ ØªØµØ§ÙˆÛŒØ± ØªØ§ ÛµÛ° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª</li>
                        <li>Ø®Ø±ÙˆØ¬ÛŒ Ø¨Ø§ Ú©ÛŒÙÛŒØª Û´K</li>
                        <li>Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ STL Ùˆ OBJ</li>
                        <li>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Û²Û´ Ø³Ø§Ø¹ØªÙ‡</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø®Ø·Ø§ Ùˆ Ù…ÙˆÙÙ‚ÛŒØª -->
        <div class="error-message" id="error-message"></div>
        <div class="success-message" id="success-message"></div>
        
        <!-- Ù¾ÛŒØ´Ø±ÙØª Ù¾Ø±Ø¯Ø§Ø²Ø´ -->
        <div class="progress-container" id="progress-container">
            <h3>â³ Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´ ØªØµÙˆÛŒØ±...</h3>
            <p id="progress-text">Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ...</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>
        
        <!-- Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ùˆ Ù†ØªÛŒØ¬Ù‡ -->
        <div class="preview-container">
            <div class="preview-box">
                <h3>ğŸ‘ï¸ ØªØµÙˆÛŒØ± ÙˆØ±ÙˆØ¯ÛŒ</h3>
                <div id="image-preview">
                    <p>Ù‡Ù†ÙˆØ² ØªØµÙˆÛŒØ±ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>
                </div>
            </div>
            
            <div class="preview-box">
                <h3>ğŸ¨ Ù…Ø¯Ù„ Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ</h3>
                <div id="result-3d">
                    <p>Ù¾Ø³ Ø§Ø² Ø§Ù†ØªØ®Ø§Ø¨ ØªØµÙˆÛŒØ±ØŒ Ù…Ø¯Ù„ Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
                </div>
            </div>
        </div>
        
        <!-- Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ -->
        <div style="text-align: center; margin: 40px 0;">
            <button id="process-btn" class="btn btn-success btn-lg" disabled>
                âš™ï¸ Ø´Ø±ÙˆØ¹ ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Û³D
            </button>
            <button id="download-btn" class="btn btn-primary" disabled>
                ğŸ’¾ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù…Ø¯Ù„
            </button>
            <button id="reset-btn" class="btn btn-warning">
                ğŸ”„ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯
            </button>
        </div>
        
        <!-- Ø¢Ù…Ø§Ø± Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª -->
        <div class="stats">
            <div class="stat-box">
                <div class="stat-value" id="image-size">0 MB</div>
                <div class="stat-label">Ø­Ø¬Ù… ØªØµÙˆÛŒØ±</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="processing-time">0s</div>
                <div class="stat-label">Ø²Ù…Ø§Ù† Ù¾Ø±Ø¯Ø§Ø²Ø´</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="polygon-count">0</div>
                <div class="stat-label">ØªØ¹Ø¯Ø§Ø¯ Ú†Ù†Ø¯Ø¶Ù„Ø¹ÛŒâ€ŒÙ‡Ø§</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">Û²Û²Û°,Û°Û°Û°</div>
                <div class="stat-label">Ø¯Ø±Ø¢Ù…Ø¯ Ù…Ø§Ù‡Ø§Ù†Ù‡ (ØªÙˆÙ…Ø§Ù†)</div>
            </div>
        </div>
        
        <footer>
            <p>Ù¾Ø±ÙˆÚ˜Ù‡ ØªØ¨Ø¯ÛŒÙ„ Û²D Ø¨Ù‡ Û³D - ØªØªØ±Ø§Ø´Ø§Ù¾ | Ù†Ø³Ø®Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</p>
            <p>Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ ØªÙ…Ø§Ù… Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ØŒ Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡ Ø±Ø§ Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯</p>
            <button id="buy-premium" class="btn btn-warning" style="margin-top: 15px;">
                ğŸ’° Ø®Ø±ÛŒØ¯ Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡ (Û±Û¹Û¹,Û°Û°Û° ØªÙˆÙ…Ø§Ù†)
            </button>
        </footer>
    </div>

    <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§ØµÙ„ÛŒ -->
    <script>
        class ImageTo3DConverter {
            constructor() {
                this.cameraStream = null;
                this.selectedImage = null;
                this.isProcessing = false;
                this.progress = 0;
                this.startTime = null;
                this.init();
            }
            
            init() {
                console.log('ğŸš€ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¨Ø¯Ù„ Û²D Ø¨Ù‡ Û³D...');
                
                // ØªÙ†Ø¸ÛŒÙ… ØªØ¨â€ŒÙ‡Ø§
                this.setupTabs();
                
                // ØªÙ†Ø¸ÛŒÙ… Ø¯ÙˆØ±Ø¨ÛŒÙ†
                this.setupCamera();
                
                // ØªÙ†Ø¸ÛŒÙ… Ú¯Ø§Ù„Ø±ÛŒ
                this.setupGallery();
                
                // ØªÙ†Ø¸ÛŒÙ… Ø¢Ù¾Ù„ÙˆØ¯ Ø§Ø² URL
                this.setupURLUpload();
                
                // ØªÙ†Ø¸ÛŒÙ… Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
                this.setupButtons();
                
                // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡
                this.checkPremiumStatus();
                
                console.log('âœ… Ù…Ø¨Ø¯Ù„ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª');
            }
            
            setupTabs() {
                const tabBtns = document.querySelectorAll('.tab-btn');
                const tabContents = document.querySelectorAll('.tab-content');
                
                tabBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ ØªØ¨â€ŒÙ‡Ø§
                        tabBtns.forEach(b => b.classList.remove('active'));
                        tabContents.forEach(c => c.classList.remove('active'));
                        
                        // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† ØªØ¨ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
                        const tabId = btn.getAttribute('data-tab');
                        btn.classList.add('active');
                        document.getElementById(`${tabId}-tab`).classList.add('active');
                        
                        // Ø§Ú¯Ø± Ø¯ÙˆØ±Ø¨ÛŒÙ† ÙØ¹Ø§Ù„ Ø§Ø³Øª Ùˆ Ø¨Ù‡ ØªØ¨ Ø¯ÛŒÚ¯Ø±ÛŒ Ø±ÙØªÛŒÙ…ØŒ Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø±Ø§ Ø®Ø§Ù…ÙˆØ´ Ú©Ù†ÛŒÙ…
                        if (tabId !== 'camera' && this.cameraStream) {
                            this.stopCamera();
                        }
                    });
                });
            }
            
            async setupCamera() {
                const startBtn = document.getElementById('start-camera');
                const captureBtn = document.getElementById('capture-btn');
                const stopBtn = document.getElementById('stop-camera');
                const video = document.getElementById('camera-stream');
                const status = document.getElementById('camera-status');
                const canvas = document.getElementById('camera-canvas');
                const context = canvas.getContext('2d');
                
                startBtn.addEventListener('click', async () => {
                    try {
                        // Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¯ÙˆØ±Ø¨ÛŒÙ†
                        this.cameraStream = await navigator.mediaDevices.getUserMedia({
                            video: {
                                facingMode: 'environment',
                                width: { ideal: 1920 },
                                height: { ideal: 1080 }
                            },
                            audio: false
                        });
                        
                        video.srcObject = this.cameraStream;
                        status.textContent = 'âœ… Ø¯ÙˆØ±Ø¨ÛŒÙ† ÙØ¹Ø§Ù„';
                        status.style.background = 'rgba(16, 185, 129, 0.7)';
                        
                        startBtn.disabled = true;
                        captureBtn.disabled = false;
                        stopBtn.disabled = false;
                        
                        this.showSuccess('Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙØ¹Ø§Ù„ Ø´Ø¯');
                    } catch (error) {
                        console.error('Ø®Ø·Ø§ÛŒ Ø¯ÙˆØ±Ø¨ÛŒÙ†:', error);
                        this.showError(`Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¯ÙˆØ±Ø¨ÛŒÙ†: ${error.message}`);
                        
                        if (error.name === 'NotAllowedError') {
                            this.showError('Ù„Ø·ÙØ§Ù‹ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø±Ø§ Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ø®ÙˆØ¯ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯');
                        } else if (error.name === 'NotFoundError') {
                            this.showError('Ø¯ÙˆØ±Ø¨ÛŒÙ† ÛŒØ§ÙØª Ù†Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¯ÛŒÚ¯Ø±ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯');
                        } else if (error.name === 'NotReadableError') {
                            this.showError('Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ ØªÙˆØ³Ø· Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¯ÛŒÚ¯Ø±ÛŒ Ø§Ø³Øª');
                        }
                    }
                });
                
                captureBtn.addEventListener('click', () => {
                    if (!this.cameraStream) return;
                    
                    // ØªÙ†Ø¸ÛŒÙ… Ø§Ù†Ø¯Ø§Ø²Ù‡ Ú©Ø§Ù†ÙˆØ³
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    
                    // Ú¯Ø±ÙØªÙ† Ø¹Ú©Ø³ Ø§Ø² ÙˆÛŒØ¯ÛŒÙˆ
                    context.drawImage(video, 0, 0, canvas.width, canvas.height);
                    
                    // ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ø¯Ø§Ø¯Ù‡ ØªØµÙˆÛŒØ±
                    const imageData = canvas.toDataURL('image/jpeg', 0.9);
                    this.handleImageSelection(imageData);
                    
                    this.showSuccess('Ø¹Ú©Ø³ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú¯Ø±ÙØªÙ‡ Ø´Ø¯');
                });
                
                stopBtn.addEventListener('click', () => {
                    this.stopCamera();
                });
            }
            
            stopCamera() {
                if (this.cameraStream) {
                    this.cameraStream.getTracks().forEach(track => track.stop());
                    this.cameraStream = null;
                    
                    const video = document.getElementById('camera-stream');
                    video.srcObject = null;
                    
                    const status = document.getElementById('camera-status');
                    status.textContent = 'âŒ Ø¯ÙˆØ±Ø¨ÛŒÙ† ØºÛŒØ±ÙØ¹Ø§Ù„';
                    status.style.background = 'rgba(239, 68, 68, 0.7)';
                    
                    document.getElementById('start-camera').disabled = false;
                    document.getElementById('capture-btn').disabled = true;
                    document.getElementById('stop-camera').disabled = true;
                    
                    this.showSuccess('Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø®Ø§Ù…ÙˆØ´ Ø´Ø¯');
                }
            }
            
            setupGallery() {
                const galleryInput = document.getElementById('gallery-input');
                const chooseBtn = document.getElementById('choose-gallery');
                
                chooseBtn.addEventListener('click', () => {
                    galleryInput.click();
                });
                
                galleryInput.addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    // Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§
                    if (!this.validateFile(file)) return;
                    
                    // Ø®ÙˆØ§Ù†Ø¯Ù† ÙØ§ÛŒÙ„
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        this.handleImageSelection(event.target.result, file);
                    };
                    reader.readAsDataURL(file);
                });
            }
            
            validateFile(file) {
                const maxSize = 10 * 1024 * 1024; // 10MB
                const allowedTypes = ['image/jpeg', 'image/png', 'image/jpg', 'image/webp'];
                
                if (file.size > maxSize) {
                    this.showError(`Ø­Ø¬Ù… ÙØ§ÛŒÙ„ Ø¨Ø§ÛŒØ¯ Ú©Ù…ØªØ± Ø§Ø² Û±Û° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª Ø¨Ø§Ø´Ø¯. Ø­Ø¬Ù… ÙØ§ÛŒÙ„ Ø´Ù…Ø§: ${(file.size / 1024 / 1024).toFixed(2)} Ù…Ú¯Ø§Ø¨Ø§ÛŒØª`);
                    return false;
                }
                
                if (!allowedTypes.includes(file.type)) {
                    this.showError('ÙØ±Ù…Øª ÙØ§ÛŒÙ„ Ø¨Ø§ÛŒØ¯ JPGØŒ PNG ÛŒØ§ WebP Ø¨Ø§Ø´Ø¯');
                    return false;
                }
                
                return true;
            }
            
            setupURLUpload() {
                const fetchBtn = document.getElementById('fetch-url');
                const urlInput = document.getElementById('image-url');
                
                fetchBtn.addEventListener('click', async () => {
                    const url = urlInput.value.trim();
                    if (!url) {
                        this.showError('Ù„Ø·ÙØ§Ù‹ Ù„ÛŒÙ†Ú© ØªØµÙˆÛŒØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                        return;
                    }
                    
                    // Ø¨Ø±Ø±Ø³ÛŒ Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡ Ø¨Ø±Ø§ÛŒ Ø¢Ù¾Ù„ÙˆØ¯ Ø§Ø² URL
                    if (!this.isPremium) {
                        this.showError('Ø¢Ù¾Ù„ÙˆØ¯ Ø§Ø² Ù„ÛŒÙ†Ú© ÙÙ‚Ø· Ø¯Ø± Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡ ÙØ¹Ø§Ù„ Ø§Ø³Øª');
                        this.showPremiumModal();
                        return;
                    }
                    
                    try {
                        this.showProgress('Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª ØªØµÙˆÛŒØ± Ø§Ø² Ù„ÛŒÙ†Ú©...');
                        
                        // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² CORS proxy Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ù…Ø´Ú©Ù„Ø§Øª CORS
                        const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
                        const response = await fetch(proxyUrl + url);
                        
                        if (!response.ok) {
                            throw new Error(`Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª ØªØµÙˆÛŒØ±: ${response.status}`);
                        }
                        
                        const blob = await response.blob();
                        const reader = new FileReader();
                        reader.onload = (event) => {
                            this.handleImageSelection(event.target.result, { name: 'image-from-url.jpg', size: blob.size });
                        };
                        reader.readAsDataURL(blob);
                        
                        this.showSuccess('ØªØµÙˆÛŒØ± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯');
                    } catch (error) {
                        this.showError(`Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª ØªØµÙˆÛŒØ±: ${error.message}`);
                    } finally {
                        this.hideProgress();
                    }
                });
            }
            
            setupButtons() {
                const processBtn = document.getElementById('process-btn');
                const downloadBtn = document.getElementById('download-btn');
                const resetBtn = document.getElementById('reset-btn');
                const buyPremiumBtn = document.getElementById('buy-premium');
                
                processBtn.addEventListener('click', () => {
                    if (!this.selectedImage) {
                        this.showError('Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ØªØµÙˆÛŒØ±ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                        return;
                    }
                    
                    this.startProcessing();
                });
                
                downloadBtn.addEventListener('click', () => {
                    this.downloadModel();
                });
                
                resetBtn.addEventListener('click', () => {
                    if (confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø±Ø§ Ø±ÛŒØ³Øª Ú©Ù†ÛŒØ¯ØŸ')) {
                        this.resetAll();
                    }
                });
                
                buyPremiumBtn.addEventListener('click', () => {
                    this.showPremiumModal();
                });
            }
            
            handleImageSelection(imageData, fileInfo = {}) {
                this.selectedImage = imageData;
                
                // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´
                const preview = document.getElementById('image-preview');
                preview.innerHTML = `<img src="${imageData}" style="max-width: 100%; border-radius: 10px;">`;
                
                // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØµÙˆÛŒØ±
                const img = new Image();
                img.onload = () => {
                    const sizeMB = fileInfo.size ? (fileInfo.size / 1024 / 1024).toFixed(2) : '--';
                    document.getElementById('image-size').textContent = `${sizeMB} MB`;
                    
                    // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ù¾Ø±Ø¯Ø§Ø²Ø´
                    document.getElementById('process-btn').disabled = false;
                    
                    this.showSuccess('ØªØµÙˆÛŒØ± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯');
                };
                img.src = imageData;
            }
            
            async startProcessing() {
                if (this.isProcessing) return;
                
                this.isProcessing = true;
                this.startTime = Date.now();
                this.progress = 0;
                
                // Ù†Ù…Ø§ÛŒØ´ Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª
                const progressContainer = document.getElementById('progress-container');
                const progressFill = document.getElementById('progress-fill');
                const progressText = document.getElementById('progress-text');
                
                progressContainer.style.display = 'block';
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´
                const steps = [
                    'Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ØªØµÙˆÛŒØ±...',
                    'ØªØ´Ø®ÛŒØµ Ù„Ø¨Ù‡â€ŒÙ‡Ø§...',
                    'Ø§ÛŒØ¬Ø§Ø¯ Ø¹Ù…Ù‚...',
                    'Ø³Ø§Ø®Øª Ù…Ø¯Ù„ Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ...',
                    'Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ø§ÙØª...',
                    'Ù†Ù‡Ø§ÛŒÛŒâ€ŒØ³Ø§Ø²ÛŒ...'
                ];
                
                for (let i = 0; i < steps.length; i++) {
                    this.progress = Math.floor((i / steps.length) * 100);
                    progressFill.style.width = `${this.progress}%`;
                    progressText.textContent = steps[i];
                    
                    await this.delay(500 + Math.random() * 1000); // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªØ§Ø®ÛŒØ± Ù¾Ø±Ø¯Ø§Ø²Ø´
                }
                
                // ØªÚ©Ù…ÛŒÙ„ Ù¾Ø±Ø¯Ø§Ø²Ø´
                this.progress = 100;
                progressFill.style.width = '100%';
                progressText.textContent = 'âœ… Ù¾Ø±Ø¯Ø§Ø²Ø´ Ú©Ø§Ù…Ù„ Ø´Ø¯!';
                
                // Ù†Ù…Ø§ÛŒØ´ Ù†ØªÛŒØ¬Ù‡
                this.showResult();
                
                // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ø¯Ø§Ù†Ù„ÙˆØ¯
                document.getElementById('download-btn').disabled = false;
                
                // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø²Ù…Ø§Ù† Ù¾Ø±Ø¯Ø§Ø²Ø´
                const processingTime = ((Date.now() - this.startTime) / 1000).toFixed(1);
                document.getElementById('processing-time').textContent = `${processingTime}s`;
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªØ¹Ø¯Ø§Ø¯ Ú†Ù†Ø¯Ø¶Ù„Ø¹ÛŒâ€ŒÙ‡Ø§
                const polygonCount = Math.floor(10000 + Math.random() * 50000);
                document.getElementById('polygon-count').textContent = polygonCount.toLocaleString();
                
                this.isProcessing = false;
                
                // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª Ø¨Ø¹Ø¯ Ø§Ø² Û³ Ø«Ø§Ù†ÛŒÙ‡
                setTimeout(() => {
                    progressContainer.style.display = 'none';
                }, 3000);
            }
            
            showResult() {
                const resultContainer = document.getElementById('result-3d');
                
                // Ø§ÛŒØ¬Ø§Ø¯ ÛŒÚ© Ù…Ø¯Ù„ Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ Ø³Ø§Ø¯Ù‡ Ø¨Ø§ Three.js
                if (typeof THREE !== 'undefined') {
                    resultContainer.innerHTML = '<div id="three-container" style="width:100%;height:300px;"></div>';
                    
                    const container = document.getElementById('three-container');
                    const scene = new THREE.Scene();
                    const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
                    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                    
                    renderer.setSize(container.clientWidth, container.clientHeight);
                    container.appendChild(renderer.domElement);
                    
                    // Ù†ÙˆØ±
                    const light1 = new THREE.DirectionalLight(0xffffff, 1);
                    light1.position.set(5, 5, 5);
                    scene.add(light1);
                    
                    const light2 = new THREE.AmbientLight(0x404040);
                    scene.add(light2);
                    
                    // Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø¯Ù„ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØµÙˆÛŒØ±
                    const geometry = new THREE.SphereGeometry(1, 32, 32);
                    const material = new THREE.MeshPhongMaterial({ 
                        color: 0x3498db,
                        shininess: 100
                    });
                    const sphere = new THREE.Mesh(geometry, material);
                    scene.add(sphere);
                    
                    camera.position.z = 3;
                    
                    // Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
                    function animate() {
                        requestAnimationFrame(animate);
                        sphere.rotation.x += 0.01;
                        sphere.rotation.y += 0.01;
                        renderer.render(scene, camera);
                    }
                    animate();
                    
                    // Ø±Ø³Ù¾Ø§Ù†Ø³ÛŒÙˆ
                    window.addEventListener('resize', () => {
                        camera.aspect = container.clientWidth / container.clientHeight;
                        camera.updateProjectionMatrix();
                        renderer.setSize(container.clientWidth, container.clientHeight);
                    });
                } else {
                    // Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø§Ú¯Ø± Three.js Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†Ø´Ø¯
                    resultContainer.innerHTML = `
                        <div style="text-align: center; padding: 40px;">
                            <div style="font-size: 50px; margin-bottom: 20px;">ğŸ‰</div>
                            <h3>Ù…Ø¯Ù„ Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯!</h3>
                            <p>Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù…Ø¯Ù„ØŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Three.js Ø¯Ø§Ø±ÛŒØ¯</p>
                            <button onclick="location.reload()" class="btn btn-primary" style="margin-top: 20px;">
                                ğŸ”„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
                            </button>
                        </div>
                    `;
                }
            }
            
            downloadModel() {
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯
                const link = document.createElement('a');
                link.href = this.selectedImage;
                link.download = '3d-model-' + Date.now() + '.obj';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                this.showSuccess('Ù…Ø¯Ù„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯');
            }
            
            resetAll() {
                // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ Ú†ÛŒØ²
                this.selectedImage = null;
                this.isProcessing = false;
                this.progress = 0;
                
                // Ø±ÛŒØ³Øª Ù†Ù…Ø§ÛŒØ´
                document.getElementById('image-preview').innerHTML = '<p>Ù‡Ù†ÙˆØ² ØªØµÙˆÛŒØ±ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>';
                document.getElementById('result-3d').innerHTML = '<p>Ù¾Ø³ Ø§Ø² Ø§Ù†ØªØ®Ø§Ø¨ ØªØµÙˆÛŒØ±ØŒ Ù…Ø¯Ù„ Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>';
                
                // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
                document.getElementById('process-btn').disabled = true;
                document.getElementById('download-btn').disabled = true;
                
                // Ø±ÛŒØ³Øª Ø¢Ù…Ø§Ø±
                document.getElementById('image-size').textContent = '0 MB';
                document.getElementById('processing-time').textContent = '0s';
                document.getElementById('polygon-count').textContent = '0';
                
                // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª
                document.getElementById('progress-container').style.display = 'none';
                
                // Ø®Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù† Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø§Ú¯Ø± Ø±ÙˆØ´Ù† Ø§Ø³Øª
                if (this.cameraStream) {
                    this.stopCamera();
                }
                
                this.showSuccess('Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø±ÛŒØ³Øª Ø´Ø¯');
            }
            
            checkPremiumStatus() {
                // Ø¨Ø±Ø±Ø³ÛŒ Ú©ÙˆÚ©ÛŒ ÛŒØ§ localStorage Ø¨Ø±Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡
                this.isPremium = localStorage.getItem('tetrashop_premium') === 'true' || false;
                
                if (this.isPremium) {
                    document.getElementById('premium-message').style.display = 'block';
                    document.getElementById('buy-premium').textContent = 'âœ… Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡ ÙØ¹Ø§Ù„';
                    document.getElementById('buy-premium').classList.remove('btn-warning');
                    document.getElementById('buy-premium').classList.add('btn-success');
                }
            }
            
            showPremiumModal() {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.8);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 10000;
                `;
                
                modal.innerHTML = `
                    <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%;">
                        <h2 style="color: #f59e0b; margin-bottom: 20px;">ğŸ’ Ø®Ø±ÛŒØ¯ Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡</h2>
                        <p>Ø¨Ø§ Ø®Ø±ÛŒØ¯ Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡ Ø¨Ù‡ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø¯Ø³ØªØ±Ø³ÛŒ Ù¾ÛŒØ¯Ø§ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯:</p>
                        <ul style="text-align: right; margin: 20px 0; padding-right: 20px;">
                            <li>Ø¢Ù¾Ù„ÙˆØ¯ ØªØµØ§ÙˆÛŒØ± ØªØ§ ÛµÛ° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª</li>
                            <li>Ù¾Ø±Ø¯Ø§Ø²Ø´ ØªØµØ§ÙˆÛŒØ± Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù„ÛŒÙ†Ú© URL</li>
                            <li>Ø®Ø±ÙˆØ¬ÛŒ Ø¨Ø§ Ú©ÛŒÙÛŒØª Û´K Ùˆ HDR</li>
                            <li>Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¯Ø± ÙØ±Ù…Øªâ€ŒÙ‡Ø§ÛŒ OBJ, STL, GLTF</li>
                            <li>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ÙÙ†ÛŒ Û²Û´ Ø³Ø§Ø¹ØªÙ‡</li>
                            <li>Ø­Ø°Ù ÙˆØ§ØªØ±Ù…Ø§Ø±Ú© Ø§Ø² Ø®Ø±ÙˆØ¬ÛŒâ€ŒÙ‡Ø§</li>
                        </ul>
                        
                        <div style="text-align: center; margin: 30px 0;">
                            <div style="font-size: 2rem; color: #f59e0b; font-weight: bold;">
                                Û±Û¹Û¹,Û°Û°Û° ØªÙˆÙ…Ø§Ù†
                            </div>
                            <div style="color: #6b7280; margin-top: 10px;">
                                Ù¾Ø±Ø¯Ø§Ø®Øª ÛŒÚ©Ø¨Ø§Ø±Ù‡ - Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø§Ø¯Ø§Ù…â€ŒØ§Ù„Ø¹Ù…Ø±
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button id="confirm-purchase" style="flex: 1; padding: 15px; background: #f59e0b; color: white; border: none; border-radius: 10px; font-size: 16px; cursor: pointer;">
                                ğŸ’° Ø®Ø±ÛŒØ¯ Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡
                            </button>
                            <button id="close-modal" style="padding: 15px 30px; background: #6b7280; color: white; border: none; border-radius: 10px; font-size: 16px; cursor: pointer;">
                                âŒ Ø¨Ø³ØªÙ†
                            </button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                document.getElementById('confirm-purchase').addEventListener('click', () => {
                    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø®Ø±ÛŒØ¯ Ù…ÙˆÙÙ‚
                    localStorage.setItem('tetrashop_premium', 'true');
                    this.isPremium = true;
                    
                    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´
                    document.getElementById('premium-message').style.display = 'block';
                    document.getElementById('buy-premium').textContent = 'âœ… Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡ ÙØ¹Ø§Ù„';
                    document.getElementById('buy-premium').classList.remove('btn-warning');
                    document.getElementById('buy-premium').classList.add('btn-success');
                    
                    this.showSuccess('ğŸ‰ Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙØ¹Ø§Ù„ Ø´Ø¯!');
                    document.body.removeChild(modal);
                });
                
                document.getElementById('close-modal').addEventListener('click', () => {
                    document.body.removeChild(modal);
                });
            }
            
            showError(message) {
                const errorDiv = document.getElementById('error-message');
                errorDiv.innerHTML = `<strong>âš ï¸ Ø®Ø·Ø§:</strong> ${message}`;
                errorDiv.style.display = 'block';
                
                // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø¨Ø¹Ø¯ Ø§Ø² Ûµ Ø«Ø§Ù†ÛŒÙ‡
                setTimeout(() => {
                    errorDiv.style.display = 'none';
                }, 5000);
            }
            
            showSuccess(message) {
                const successDiv = document.getElementById('success-message');
                successDiv.innerHTML = `<strong>âœ… Ù…ÙˆÙÙ‚ÛŒØª:</strong> ${message}`;
                successDiv.style.display = 'block';
                
                // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø¨Ø¹Ø¯ Ø§Ø² Û³ Ø«Ø§Ù†ÛŒÙ‡
                setTimeout(() => {
                    successDiv.style.display = 'none';
                }, 3000);
            }
            
            showProgress(text) {
                const progressContainer = document.getElementById('progress-container');
                const progressText = document.getElementById('progress-text');
                
                progressText.textContent = text;
                progressContainer.style.display = 'block';
            }
            
            hideProgress() {
                document.getElementById('progress-container').style.display = 'none';
            }
            
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }
        
        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¨Ø¯Ù„ Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ DOM Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª
        document.addEventListener('DOMContentLoaded', () => {
            window.converter = new ImageTo3DConverter();
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÙˆÙ„â€ŒØ¨Ø§Ø±
            const style = document.createElement('style');
            style.textContent = `
                ::-webkit-scrollbar {
                    width: 10px;
                }
                ::-webkit-scrollbar-track {
                    background: #f1f1f1;
                    border-radius: 5px;
                }
                ::-webkit-scrollbar-thumb {
                    background: linear-gradient(45deg, var(--primary), var(--secondary));
                    border-radius: 5px;
                }
                ::-webkit-scrollbar-thumb:hover {
                    background: linear-gradient(45deg, #5a6fd8, #6a4191);
                }
            `;
            document.head.appendChild(style);
            
            console.log('ğŸ® Ù…Ø¨Ø¯Ù„ Û²D Ø¨Ù‡ Û³D Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø³Øª!');
        });
        
        // ØªØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
        function debugInfo() {
            console.log('ğŸ”§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯ÛŒØ¨Ø§Ú¯:');
            console.log('Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯ÙˆØ±Ø¨ÛŒÙ†:', !!navigator.mediaDevices);
            console.log('Three.js:', typeof THREE);
            console.log('ØªØµÙˆÛŒØ± Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡:', window.converter?.selectedImage ? 'âœ…' : 'âŒ');
            console.log('Ø¨Ø³ØªÙ‡ ÙˆÛŒÚ˜Ù‡:', window.converter?.isPremium ? 'âœ… ÙØ¹Ø§Ù„' : 'âŒ ØºÛŒØ±ÙØ¹Ø§Ù„');
        }
        
        // Ú©Ù„ÛŒØ¯ Ù…ÛŒØ§Ù†Ø¨Ø± Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¨Ø§Ú¯ (Ctrl+Shift+D)
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.shiftKey && e.key === 'D') {
                debugInfo();
            }
        });
    </script>
</body>
</html>
