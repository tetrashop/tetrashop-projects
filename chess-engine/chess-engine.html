<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Engine - Tetrashop</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .control-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            color: #333;
        }
        .input-group {
            margin-bottom: 20px;
        }
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }
        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
            font-family: inherit;
        }
        .input-group input:focus, .input-group textarea:focus {
            border-color: #667eea;
            outline: none;
        }
        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .btn {
            flex: 1;
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            min-width: 150px;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .btn-secondary {
            background: #95a5a6;
            color: white;
        }
        .btn-success {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            color: white;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .output-panel {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            min-height: 200px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            overflow-y: auto;
            max-height: 400px;
        }
        .loading {
            text-align: center;
            color: #667eea;
            font-size: 1.2em;
        }
        .success {
            color: #2ecc71;
        }
        .error {
            color: #e74c3c;
        }
        .chess-board {
            display: grid;
            grid-template-columns: repeat(8, 60px);
            grid-gap: 2px;
            margin: 20px auto;
            width: fit-content;
            border: 3px solid #7b5e57;
            padding: 10px;
            background: #7b5e57;
            border-radius: 5px;
        }
        .chess-cell {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .chess-cell:hover {
            transform: scale(1.1);
        }
        .chess-white {
            background: #f0d9b5;
        }
        .chess-black {
            background: #b58863;
        }
        .back-btn {
            background: #e74c3c;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
            text-decoration: none;
            display: inline-block;
        }
        .analysis-result {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-btn">â¬… Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>
        
        <div class="header">
            <h1>â™Ÿï¸ Chess Engine - Ù…ÙˆØªÙˆØ± Ø´Ø·Ø±Ù†Ø¬</h1>
            <p>ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…ÙˆÙ‚Ø¹ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø´Ø·Ø±Ù†Ø¬ Ùˆ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø­Ø±Ú©Ø§Øª Ø¨Ù‡ÛŒÙ†Ù‡</p>
        </div>

        <div class="control-panel">
            <div class="input-group">
                <label>Ù…ÙˆÙ‚Ø¹ÛŒØª ÙØ¹Ù„ÛŒ Ù…Ù‡Ø±Ù‡â€ŒÙ‡Ø§ (FEN):</label>
                <textarea id="chessPosition" rows="3" placeholder="Ù…Ø«Ø§Ù„: rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR">
rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR
                </textarea>
            </div>

            <div class="input-group">
                <label>Ø³Ø·Ø­ Ø¯Ø´ÙˆØ§Ø±ÛŒ:</label>
                <select id="difficulty">
                    <option value="easy">Ø¢Ø³Ø§Ù† (Ø¹Ù…Ù‚ Û¸)</option>
                    <option value="medium" selected>Ù…ØªÙˆØ³Ø· (Ø¹Ù…Ù‚ Û±Û²)</option>
                    <option value="hard">Ø³Ø®Øª (Ø¹Ù…Ù‚ Û±Û¶)</option>
                    <option value="expert">Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ (Ø¹Ù…Ù‚ Û²Û°)</option>
                </select>
            </div>

            <div class="input-group">
                <label>Ø²Ù…Ø§Ù† ØªØ­Ù„ÛŒÙ„ (Ø«Ø§Ù†ÛŒÙ‡):</label>
                <input type="number" id="analysisTime" value="5" min="1" max="30">
            </div>

            <div class="btn-group">
                <button class="btn btn-primary" onclick="analyzePosition()">
                    ğŸ§  ØªØ­Ù„ÛŒÙ„ Ù…ÙˆÙ‚Ø¹ÛŒØª
                </button>
                <button class="btn btn-success" onclick="suggestMove()">
                    ğŸ’¡ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø­Ø±Ú©Øª Ø¨Ø¹Ø¯ÛŒ
                </button>
                <button class="btn btn-secondary" onclick="resetBoard()">
                    ğŸ”„ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯
                </button>
            </div>
        </div>

        <div class="chess-board" id="chessBoard">
            <!-- ØªØ®ØªÙ‡ Ø´Ø·Ø±Ù†Ø¬ Ø§ÛŒÙ†Ø¬Ø§ ØªÙˆÙ„ÛŒØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
        </div>

        <div class="output-panel" id="output">
            ğŸ¯ Ø®Ø±ÙˆØ¬ÛŒ ØªØ­Ù„ÛŒÙ„ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯...
            \nØ¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ø±ÙˆÛŒ "ØªØ­Ù„ÛŒÙ„ Ù…ÙˆÙ‚Ø¹ÛŒØª" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.
        </div>
    </div>

    <script>
        // ØªØ®ØªÙ‡ Ø´Ø·Ø±Ù†Ø¬ Ø§ÙˆÙ„ÛŒÙ‡
        const initialBoard = [
            ['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'],
            ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'],
            ['', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', ''],
            ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'],
            ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R']
        ];

        const pieceSymbols = {
            'r': 'â™œ', 'n': 'â™', 'b': 'â™', 'q': 'â™›', 'k': 'â™š', 'p': 'â™Ÿ',
            'R': 'â™–', 'N': 'â™˜', 'B': 'â™—', 'Q': 'â™•', 'K': 'â™”', 'P': 'â™™',
            '': ''
        };

        // ØªØ§Ø¨Ø¹ ØªØ­Ù„ÛŒÙ„ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø´Ø·Ø±Ù†Ø¬
        async function analyzePosition() {
            const position = document.getElementById('chessPosition').value;
            const difficulty = document.getElementById('difficulty').value;
            const analysisTime = document.getElementById('analysisTime').value;
            const output = document.getElementById('output');
            
            output.innerHTML = '<div class="loading">ğŸ” Ø¯Ø± Ø­Ø§Ù„ ØªØ­Ù„ÛŒÙ„ Ù…ÙˆÙ‚Ø¹ÛŒØª...\nÙ„Ø·ÙØ§Ù‹ ØµØ¨Ø± Ú©Ù†ÛŒØ¯</div>';
            
            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ù¾Ø§ÛŒØªÙˆÙ†
            setTimeout(() => {
                const depthMap = { easy: 8, medium: 12, hard: 16, expert: 20 };
                const depth = depthMap[difficulty];
                
                const analysis = {
                    evaluation: "+1.2",
                    bestMove: "e2-e4",
                    depth: depth,
                    nodes: Math.floor(Math.random() * 20000) + 10000,
                    time: analysisTime + "s",
                    threats: ["Ú©ÛŒØ´ Ø¯Ø± Û³ Ø­Ø±Ú©Øª", "ØªÙ‡Ø¯ÛŒØ¯ Ø¨Ù‡ Ù‚Ù„Ø¹Ù‡ Ø±Ùˆ"],
                    pv: ["e2-e4", "e7-e5", "g1-f3", "b8-c6", "f1-b5"]
                };
                
                output.innerHTML = `
                    <div class="success">
                        <h3>âœ… ØªØ­Ù„ÛŒÙ„ Ú©Ø§Ù…Ù„ Ø´Ø¯!</h3>
                        <div class="analysis-result">
                            <strong>Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª:</strong> ${analysis.evaluation} (Ø³ÙÛŒØ¯ Ø¨Ø±ØªØ±)
                            <br><strong>Ø¨Ù‡ØªØ±ÛŒÙ† Ø­Ø±Ú©Øª:</strong> ${analysis.bestMove}
                            <br><strong>Ø¹Ù…Ù‚ ØªØ­Ù„ÛŒÙ„:</strong> ${analysis.depth}
                            <br><strong>Ú¯Ø±Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø´Ø¯Ù‡:</strong> ${analysis.nodes.toLocaleString()}
                            <br><strong>Ø²Ù…Ø§Ù† ØªØ­Ù„ÛŒÙ„:</strong> ${analysis.time}
                            <br><strong>ØªÙ‡Ø¯ÛŒØ¯â€ŒÙ‡Ø§:</strong> ${analysis.threats.join('ØŒ ')}
                            <br><strong>Ø¨Ø±ØªØ±ÛŒÙ† ØªØºÛŒÛŒØ±Ø§Øª:</strong> ${analysis.pv.join(' â†’ ')}
                        </div>
                    </div>
                `;
                
                generateChessBoard();
            }, 2000);
        }

        // ØªØ§Ø¨Ø¹ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø­Ø±Ú©Øª
        async function suggestMove() {
            const output = document.getElementById('output');
            output.innerHTML = '<div class="loading">ğŸ’¡ Ø¯Ø± Ø­Ø§Ù„ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¨Ù‡ØªØ±ÛŒÙ† Ø­Ø±Ú©Øª...\nØ§ÛŒÙ† ÙØ±Ø¢ÛŒÙ†Ø¯ Ú†Ù†Ø¯ Ø«Ø§Ù†ÛŒÙ‡ Ø·ÙˆÙ„ Ù…ÛŒâ€ŒÚ©Ø´Ø¯</div>';
            
            setTimeout(() => {
                const moves = [
                    "e2-e4 (Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¨Ø§Ø²ÛŒ - Ú©Ù†ØªØ±Ù„ Ù…Ø±Ú©Ø²)",
                    "d2-d4 (Ø¯ÙØ§Ø¹ Ù…Ø±Ú©Ø²ÛŒ - ØªÙˆØ³Ø¹Ù‡ ÙˆØ²ÛŒØ±)", 
                    "g1-f3 (ØªÙˆØ³Ø¹Ù‡ Ø§Ø³Ø¨ - Ø¢Ù…Ø§Ø¯Ù‡ Ú©Ø±Ø¯Ù† Ù‚Ù„Ø¹Ù‡â€ŒØ±Ùˆ)",
                    "c2-c4 (Ø¯ÙØ§Ø¹ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ - Ú©Ù†ØªØ±Ù„ Ø®Ø§Ù†Ù‡ d5)"
                ];
                
                output.innerHTML = `
                    <div class="success">
                        <h3>ğŸ¯ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ø­Ø±Ú©Øª Ø¨Ø±ØªØ±:</h3>
                        ${moves.map((move, index) => 
                            `<div class="analysis-result">${index + 1}. ${move}</div>`
                        ).join('')}
                        \n\nğŸ’¡ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø³ÛŒØ³ØªÙ…: ${moves[0]}
                    </div>
                `;
            }, 1500);
        }

        // ØªÙˆÙ„ÛŒØ¯ ØªØ®ØªÙ‡ Ø´Ø·Ø±Ù†Ø¬
        function generateChessBoard() {
            const board = document.getElementById('chessBoard');
            board.innerHTML = '';
            
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 8; col++) {
                    const cell = document.createElement('div');
                    cell.className = `chess-cell ${(row + col) % 2 === 0 ? 'chess-white' : 'chess-black'}`;
                    cell.textContent = pieceSymbols[initialBoard[row][col]];
                    cell.onclick = () => selectPiece(row, col);
                    board.appendChild(cell);
                }
            }
        }

        function selectPiece(row, col) {
            const piece = initialBoard[row][col];
            const output = document.getElementById('output');
            
            if (piece) {
                const pieceName = getPieceName(piece);
                output.innerHTML = `
                    <div class="analysis-result">
                        <strong>Ù…Ù‡Ø±Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡:</strong> ${pieceSymbols[piece]} ${pieceName}
                        <br><strong>Ù…ÙˆÙ‚Ø¹ÛŒØª:</strong> ${String.fromCharCode(97 + col)}${8 - row}
                        <br><strong>Ø­Ø±Ú©Ø§Øª Ù…Ù…Ú©Ù†:</strong> ${getPossibleMoves(piece, row, col).join(', ')}
                    </div>
                `;
            }
        }

        function getPieceName(piece) {
            const names = {
                'r': 'Ø±Ø® Ø³ÛŒØ§Ù‡', 'n': 'Ø§Ø³Ø¨ Ø³ÛŒØ§Ù‡', 'b': 'ÙÛŒÙ„ Ø³ÛŒØ§Ù‡', 'q': 'ÙˆØ²ÛŒØ± Ø³ÛŒØ§Ù‡', 'k': 'Ø´Ø§Ù‡ Ø³ÛŒØ§Ù‡', 'p': 'Ø³Ø±Ø¨Ø§Ø² Ø³ÛŒØ§Ù‡',
                'R': 'Ø±Ø® Ø³ÙÛŒØ¯', 'N': 'Ø§Ø³Ø¨ Ø³ÙÛŒØ¯', 'B': 'ÙÛŒÙ„ Ø³ÙÛŒØ¯', 'Q': 'ÙˆØ²ÛŒØ± Ø³ÙÛŒØ¯', 'K': 'Ø´Ø§Ù‡ Ø³ÙÛŒØ¯', 'P': 'Ø³Ø±Ø¨Ø§Ø² Ø³ÙÛŒØ¯'
            };
            return names[piece] || 'Ø®Ø§Ù†Ù‡ Ø®Ø§Ù„ÛŒ';
        }

        function getPossibleMoves(piece, row, col) {
            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø­Ø±Ú©Ø§Øª Ù…Ù…Ú©Ù†
            const moves = [];
            if (piece.toLowerCase() === 'p') moves.push('Ø­Ø±Ú©Øª Ø¨Ù‡ Ø¬Ù„Ùˆ');
            if (piece.toLowerCase() === 'n') moves.push('Ø­Ø±Ú©Øª L Ø´Ú©Ù„');
            if (piece.toLowerCase() === 'r') moves.push('Ø­Ø±Ú©Øª Ø¹Ù…ÙˆØ¯ÛŒ/Ø§ÙÙ‚ÛŒ');
            if (piece.toLowerCase() === 'b') moves.push('Ø­Ø±Ú©Øª Ù…ÙˆØ±Ø¨');
            if (piece.toLowerCase() === 'q') moves.push('ØªÙ…Ø§Ù… Ø¬Ù‡Ø§Øª');
            if (piece.toLowerCase() === 'k') moves.push('ÛŒÚ© Ø®Ø§Ù†Ù‡ Ø¯Ø± ØªÙ…Ø§Ù… Ø¬Ù‡Ø§Øª');
            return moves;
        }

        function resetBoard() {
            document.getElementById('chessPosition').value = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR';
            document.getElementById('output').innerHTML = 'ğŸ¯ Ø®Ø±ÙˆØ¬ÛŒ ØªØ­Ù„ÛŒÙ„ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯...\nØ¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ø±ÙˆÛŒ "ØªØ­Ù„ÛŒÙ„ Ù…ÙˆÙ‚Ø¹ÛŒØª" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.';
            generateChessBoard();
        }

        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        generateChessBoard();
    </script>
</body>
  </html>
