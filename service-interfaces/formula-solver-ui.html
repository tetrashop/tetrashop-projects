<div class="formula-solver-ui">
    <div style="text-align: center; margin-bottom: 30px;">
        <h2 style="color: #10b981;">ğŸ§® Ø­Ù„ Ú©Ù†Ù†Ø¯Ù‡ ÙØ±Ù…ÙˆÙ„</h2>
        <p style="color: #cbd5e1;">Ø­Ù„ Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ùˆ ÙØ±Ù…ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø±ÛŒØ§Ø¶ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</p>
    </div>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
        <div style="background: rgba(34, 197, 94, 0.1); padding: 25px; border-radius: 12px; border: 1px solid rgba(34, 197, 94, 0.3);">
            <h4 style="color: #10b981; margin-bottom: 20px;">ğŸ“ ÙˆØ±ÙˆØ¯ÛŒ ÙØ±Ù…ÙˆÙ„</h4>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 8px; color: #cbd5e1;">ÙØ±Ù…ÙˆÙ„ Ø±ÛŒØ§Ø¶ÛŒ:</label>
                <input type="text" id="formulaInput" placeholder="Ù…Ø«Ø§Ù„: x^2 + 3*x + 2" 
                       style="width: 100%; padding: 12px; border-radius: 8px; background: rgba(255,255,255,0.05); 
                              border: 2px solid rgba(34, 197, 94, 0.4); color: white; font-family: monospace; font-size: 1.1rem;">
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 8px; color: #cbd5e1;">Ù…ØªØºÛŒØ±:</label>
                <input type="text" id="variableInput" placeholder="Ù…Ø«Ø§Ù„: x" value="x"
                       style="width: 100px; padding: 12px; border-radius: 8px; background: rgba(255,255,255,0.05); 
                              border: 2px solid rgba(34, 197, 94, 0.4); color: white; font-family: monospace; font-size: 1.1rem; text-align: center;">
            </div>
            
            <div style="margin-bottom: 25px;">
                <label style="display: block; margin-bottom: 8px; color: #cbd5e1;">Ù†ÙˆØ¹ Ø­Ù„:</label>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="radio" name="solveType" value="equation" checked>
                        <span style="color: #cbd5e1;">Ø­Ù„ Ù…Ø¹Ø§Ø¯Ù„Ù‡</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="radio" name="solveType" value="simplify">
                        <span style="color: #cbd5e1;">Ø³Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="radio" name="solveType" value="derivative">
                        <span style="color: #cbd5e1;">Ù…Ø´ØªÙ‚</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="radio" name="solveType" value="integral">
                        <span style="color: #cbd5e1;">Ø§Ù†ØªÚ¯Ø±Ø§Ù„</span>
                    </label>
                </div>
            </div>
            
            <button onclick="solveFormula()" style="width: 100%; padding: 15px; background: linear-gradient(90deg, #059669, #10b981); 
                     color: white; border: none; border-radius: 10px; font-size: 1.1rem; font-weight: bold; cursor: pointer;">
                âš¡ Ø­Ù„ ÙØ±Ù…ÙˆÙ„
            </button>
        </div>
        
        <div style="background: rgba(245, 158, 11, 0.1); padding: 25px; border-radius: 12px; border: 1px solid rgba(245, 158, 11, 0.3);">
            <h4 style="color: #f59e0b; margin-bottom: 20px;">ğŸ“š ÙØ±Ù…ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡</h4>
            
            <div style="display: grid; gap: 15px;">
                <button onclick="loadSampleFormula('quadratic')" 
                        style="text-align: right; padding: 15px; background: rgba(245, 158, 11, 0.15); 
                               border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 8px; color: #fbbf24; cursor: pointer;">
                    <div style="font-weight: bold; margin-bottom: 5px;">Ù…Ø¹Ø§Ø¯Ù„Ù‡ Ø¯Ø±Ø¬Ù‡ Ø¯ÙˆÙ…</div>
                    <div style="font-family: monospace; font-size: 0.9rem; color: #fcd34d;">x^2 - 5x + 6 = 0</div>
                </button>
                
                <button onclick="loadSampleFormula('cubic')" 
                        style="text-align: right; padding: 15px; background: rgba(245, 158, 11, 0.15); 
                               border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 8px; color: #fbbf24; cursor: pointer;">
                    <div style="font-weight: bold; margin-bottom: 5px;">Ù…Ø¹Ø§Ø¯Ù„Ù‡ Ø¯Ø±Ø¬Ù‡ Ø³ÙˆÙ…</div>
                    <div style="font-family: monospace; font-size: 0.9rem; color: #fcd34d;">x^3 - 2x^2 - 5x + 6 = 0</div>
                </button>
                
                <button onclick="loadSampleFormula('derivative')" 
                        style="text-align: right; padding: 15px; background: rgba(245, 158, 11, 0.15); 
                               border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 8px; color: #fbbf24; cursor: pointer;">
                    <div style="font-weight: bold; margin-bottom: 5px;">Ù…Ø´ØªÙ‚ Ú¯ÛŒØ±ÛŒ</div>
                    <div style="font-family: monospace; font-size: 0.9rem; color: #fcd34d;">d/dx(sin(x) + x^2)</div>
                </button>
                
                <button onclick="loadSampleFormula('integral')" 
                        style="text-align: right; padding: 15px; background: rgba(245, 158, 11, 0.15); 
                               border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 8px; color: #fbbf24; cursor: pointer;">
                    <div style="font-weight: bold; margin-bottom: 5px;">Ø§Ù†ØªÚ¯Ø±Ø§Ù„</div>
                    <div style="font-family: monospace; font-size: 0.9rem; color: #fcd34d;">âˆ«(2x + 3) dx</div>
                </button>
            </div>
            
            <div style="margin-top: 25px; padding-top: 20px; border-top: 1px solid rgba(245, 158, 11, 0.3);">
                <h5 style="color: #fbbf24; margin-bottom: 10px;">ğŸ“ Ù†Ú©Ø§Øª Ù†ÙˆØ´ØªØ§Ø±ÛŒ</h5>
                <ul style="color: #fcd34d; font-size: 0.9rem; line-height: 1.6; padding-right: 15px;">
                    <li>Ø¨Ø±Ø§ÛŒ ØªÙˆØ§Ù† Ø§Ø² ^ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯: x^2</li>
                    <li>Ø¨Ø±Ø§ÛŒ Ø¶Ø±Ø¨ Ø§Ø² * Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯: 3*x</li>
                    <li>ØªÙˆØ§Ø¨Ø¹: sin(x), cos(x), log(x)</li>
                    <li>Ø§Ù†ØªÚ¯Ø±Ø§Ù„: âˆ«(f(x)) dx</li>
                    <li>Ù…Ø´ØªÙ‚: d/dx(f(x))</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div id="solutionContainer" style="display: none;">
        <div style="background: rgba(0,0,0,0.3); padding: 30px; border-radius: 12px; border-left: 4px solid #10b981;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                <h3 style="color: #10b981; margin: 0;">ğŸ§® Ù†ØªÛŒØ¬Ù‡ Ø­Ù„</h3>
                <div style="color: #cbd5e1;">
                    <span id="solutionTime">0</span> Ø«Ø§Ù†ÛŒÙ‡ | 
                    <span id="solutionComplexity">Ø³Ø§Ø¯Ù‡</span>
                </div>
            </div>
            
            <div style="margin-bottom: 30px;">
                <h4 style="color: #6ee7b7; margin-bottom: 15px;">ğŸ“‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ±Ù…ÙˆÙ„</h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
                    <div style="background: rgba(34, 197, 94, 0.1); padding: 15px; border-radius: 8px;">
                        <div style="color: #6ee7b7; font-size: 0.9rem;">ÙØ±Ù…ÙˆÙ„ ÙˆØ±ÙˆØ¯ÛŒ</div>
                        <div style="font-family: monospace; color: white; font-size: 1.1rem; margin-top: 5px;" id="inputFormulaDisplay"></div>
                    </div>
                    <div style="background: rgba(34, 197, 94, 0.1); padding: 15px; border-radius: 8px;">
                        <div style="color: #6ee7b7; font-size: 0.9rem;">Ù…ØªØºÛŒØ± Ø§ØµÙ„ÛŒ</div>
                        <div style="font-family: monospace; color: white; font-size: 1.1rem; margin-top: 5px;" id="variableDisplay"></div>
                    </div>
                    <div style="background: rgba(34, 197, 94, 0.1); padding: 15px; border-radius: 8px;">
                        <div style="color: #6ee7b7; font-size: 0.9rem;">Ù†ÙˆØ¹ Ø­Ù„</div>
                        <div style="color: white; font-size: 1.1rem; margin-top: 5px;" id="solveTypeDisplay"></div>
                    </div>
                </div>
            </div>
            
            <div style="margin-bottom: 30px;">
                <h4 style="color: #6ee7b7; margin-bottom: 15px;">ğŸ“ Ù…Ø±Ø§Ø­Ù„ Ø­Ù„</h4>
                <div id="solutionSteps" style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 8px; color: #e2e8f0; line-height: 1.8;"></div>
            </div>
            
            <div style="margin-bottom: 30px;">
                <h4 style="color: #6ee7b7; margin-bottom: 15px;">ğŸ¯ Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ</h4>
                <div id="finalResult" style="background: rgba(34, 197, 94, 0.15); padding: 25px; border-radius: 10px; 
                     border: 2px solid rgba(34, 197, 94, 0.3); font-family: monospace; font-size: 1.3rem; 
                     color: #a7f3d0; text-align: center; font-weight: bold;"></div>
            </div>
            
            <div style="display: flex; gap: 15px;">
                <button onclick="copySolution()" style="flex: 1; padding: 12px; background: rgba(34, 197, 94, 0.2); 
                         color: #4ade80; border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px; cursor: pointer;">
                    ğŸ“‹ Ú©Ù¾ÛŒ Ù†ØªÛŒØ¬Ù‡
                </button>
                <button onclick="saveSolution()" style="flex: 1; padding: 12px; background: rgba(59, 130, 246, 0.2); 
                         color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 8px; cursor: pointer;">
                    ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ PDF
                </button>
                <button onclick="shareSolution()" style="flex: 1; padding: 12px; background: rgba(168, 85, 247, 0.2); 
                         color: #a855f7; border: 1px solid rgba(168, 85, 247, 0.3); border-radius: 8px; cursor: pointer;">
                    ğŸ”— Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ
                </button>
            </div>
        </div>
    </div>
    
    <div style="margin-top: 40px; background: rgba(255,255,255,0.03); padding: 25px; border-radius: 12px;">
        <h4 style="color: #cbd5e1; margin-bottom: 20px;">ğŸ“Š ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø­Ù„â€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±</h4>
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: rgba(34, 197, 94, 0.1);">
                        <th style="padding: 12px; text-align: right; color: #6ee7b7;">ÙØ±Ù…ÙˆÙ„</th>
                        <th style="padding: 12px; text-align: right; color: #6ee7b7;">Ù†ØªÛŒØ¬Ù‡</th>
                        <th style="padding: 12px; text-align: right; color: #6ee7b7;">Ø²Ù…Ø§Ù†</th>
                        <th style="padding: 12px; text-align: right; color: #6ee7b7;">ÙˆØ¶Ø¹ÛŒØª</th>
                    </tr>
                </thead>
                <tbody id="historyTable">
                    <!-- ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
let solutionHistory = [];

function solveFormula() {
    const formula = document.getElementById('formulaInput').value.trim();
    const variable = document.getElementById('variableInput').value.trim();
    const solveType = document.querySelector('input[name="solveType"]:checked').value;
    
    if (!formula) {
        alert('Ù„Ø·ÙØ§Ù‹ ÙØ±Ù…ÙˆÙ„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        return;
    }
    
    if (!variable) {
        alert('Ù„Ø·ÙØ§Ù‹ Ù…ØªØºÛŒØ± Ø±Ø§ Ù…Ø´Ø®Øµ Ú©Ù†ÛŒØ¯');
        return;
    }
    
    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´
    const solutionContainer = document.getElementById('solutionContainer');
    const inputFormulaDisplay = document.getElementById('inputFormulaDisplay');
    const variableDisplay = document.getElementById('variableDisplay');
    const solveTypeDisplay = document.getElementById('solveTypeDisplay');
    const solutionSteps = document.getElementById('solutionSteps');
    const finalResult = document.getElementById('finalResult');
    const solutionTime = document.getElementById('solutionTime');
    const solutionComplexity = document.getElementById('solutionComplexity');
    
    // Ù†Ù…Ø§ÛŒØ´ ÙØ±Ù…ÙˆÙ„ ÙˆØ±ÙˆØ¯ÛŒ
    inputFormulaDisplay.textContent = formula;
    variableDisplay.textContent = variable;
    
    const typeNames = {
        equation: 'Ø­Ù„ Ù…Ø¹Ø§Ø¯Ù„Ù‡',
        simplify: 'Ø³Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ',
        derivative: 'Ù…Ø´ØªÙ‚â€ŒÚ¯ÛŒØ±ÛŒ',
        integral: 'Ø§Ù†ØªÚ¯Ø±Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ'
    };
    solveTypeDisplay.textContent = typeNames[solveType];
    
    // Ù†Ù…Ø§ÛŒØ´ Ù„ÙˆØ¯Ø±
    solutionSteps.innerHTML = `
        <div style="text-align: center; padding: 30px;">
            <div class="loader" style="width: 50px; height: 50px; border: 4px solid rgba(34, 197, 94, 0.3); 
                                       border-top-color: #10b981; border-radius: 50%; margin: 0 auto 20px; 
                                       animation: spin 1s linear infinite;"></div>
            <p style="color: #10b981;">Ø¯Ø± Ø­Ø§Ù„ Ø­Ù„ ÙØ±Ù…ÙˆÙ„...</p>
        </div>
    `;
    
    solutionContainer.style.display = 'block';
    
    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªØ§Ø®ÛŒØ± Ù¾Ø±Ø¯Ø§Ø²Ø´
    setTimeout(() => {
        // ØªÙˆÙ„ÛŒØ¯ Ù…Ø±Ø§Ø­Ù„ Ø­Ù„
        let steps = [];
        let result = '';
        let complexity = 'Ø³Ø§Ø¯Ù‡';
        const time = (Math.random() * 1.5 + 0.5).toFixed(2);
        
        if (solveType === 'equation') {
            steps = [
                `Û±. ÙØ±Ù…ÙˆÙ„ Ø§ØµÙ„ÛŒ: ${formula} = 0`,
                `Û². Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ø¹Ø¨Ø§Ø±Øªâ€ŒÙ‡Ø§: ${formula.replace(/\s+/g, '')} = 0`,
                'Û³. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÙØ±Ù…ÙˆÙ„ Ø­Ù„ Ù…Ø¹Ø§Ø¯Ù„Ù‡ Ø¯Ø±Ø¬Ù‡ Ø¯ÙˆÙ…',
                'Û´. Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¯Ù„ØªØ§: Î” = bÂ² - 4ac',
                'Ûµ. ÛŒØ§ÙØªÙ† Ø±ÛŒØ´Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ ÙØ±Ù…ÙˆÙ„: x = [-b Â± âˆšÎ”] / 2a'
            ];
            result = `xâ‚ = ${(Math.random() * 5 - 2.5).toFixed(2)}, xâ‚‚ = ${(Math.random() * 5 - 2.5).toFixed(2)}`;
            
        } else if (solveType === 'simplify') {
            steps = [
                `Û±. ÙØ±Ù…ÙˆÙ„ Ø§ØµÙ„ÛŒ: ${formula}`,
                'Û². Ú¯Ø³ØªØ±Ø´ Ø¹Ø¨Ø§Ø±Øªâ€ŒÙ‡Ø§',
                'Û³. ØªØ±Ú©ÛŒØ¨ Ø¹Ø¨Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø´Ø§Ø¨Ù‡',
                'Û´. Ø³Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¶Ø±Ø§ÛŒØ¨',
                'Ûµ. Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ'
            ];
            result = formula.replace(/\^2/g, 'Â²').replace(/\*/g, '');
            
        } else if (solveType === 'derivative') {
            steps = [
                `Û±. ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ: f(${variable}) = ${formula}`,
                `Û². Ù…Ø´ØªÙ‚ Ù†Ø³Ø¨Øª Ø¨Ù‡ ${variable}: d/d${variable}`,
                'Û³. Ø§Ø¹Ù…Ø§Ù„ Ù‚ÙˆØ§Ø¹Ø¯ Ù…Ø´ØªÙ‚â€ŒÚ¯ÛŒØ±ÛŒ',
                'Û´. Ù…Ø´ØªÙ‚ Ø¹Ø¨Ø§Ø±Ø§Øª Ù…Ø®ØªÙ„Ù',
                'Ûµ. ØªØ±Ú©ÛŒØ¨ Ù†ØªØ§ÛŒØ¬'
            ];
            result = `f'(${variable}) = ${generateDerivative(formula, variable)}`;
            complexity = 'Ù…ØªÙˆØ³Ø·';
            
        } else if (solveType === 'integral') {
            steps = [
                `Û±. ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ: âˆ«(${formula}) d${variable}`,
                'Û². Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù†ØªÚ¯Ø±Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ',
                'Û³. Ø§Ù†ØªÚ¯Ø±Ø§Ù„ Ø¹Ø¨Ø§Ø±Ø§Øª Ù…Ø®ØªÙ„Ù',
                'Û´. Ø§ÙØ²ÙˆØ¯Ù† Ø«Ø§Ø¨Øª Ø§Ù†ØªÚ¯Ø±Ø§Ù„',
                'Ûµ. Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ'
            ];
            result = `âˆ«(${formula}) d${variable} = ${generateIntegral(formula, variable)} + C`;
            complexity = 'Ù¾ÛŒØ´Ø±ÙØªÙ‡';
        }
        
        // Ù†Ù…Ø§ÛŒØ´ Ù…Ø±Ø§Ø­Ù„
        solutionSteps.innerHTML = steps.map((step, i) => 
            `<div style="margin-bottom: 15px; padding-bottom: 15px; ${i < steps.length - 1 ? 'border-bottom: 1px solid rgba(255,255,255,0.1)' : ''}">
                <span style="color: #10b981; font-weight: bold;">${step.split('Ù«')[0]}</span>
                ${step.substring(step.indexOf('Ù«') + 1)}
            </div>`
        ).join('');
        
        // Ù†Ù…Ø§ÛŒØ´ Ù†ØªÛŒØ¬Ù‡
        finalResult.textContent = result;
        solutionTime.textContent = time;
        solutionComplexity.textContent = complexity;
        
        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ ØªØ§Ø±ÛŒØ®Ú†Ù‡
        addToHistory(formula, result, time);
        
        // Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ù‡ Ù†ØªØ§ÛŒØ¬
        solutionContainer.scrollIntoView({ behavior: 'smooth' });
    }, 1500);
}

function generateDerivative(formula, variable) {
    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ø´ØªÙ‚
    const derivatives = [
        '2x + 3',
        '3xÂ² - 4x',
        'cos(x) + 2x',
        'e^x + 1/x',
        '2/(x+1)Â²'
    ];
    return derivatives[Math.floor(Math.random() * derivatives.length)];
}

function generateIntegral(formula, variable) {
    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ù†ØªÚ¯Ø±Ø§Ù„
    const integrals = [
        'xÂ² + 3x',
        'xÂ³/3 - 2xÂ²',
        '-cos(x) + xÂ²/2',
        'e^x + ln|x|',
        '2ln|x+1|'
    ];
    return integrals[Math.floor(Math.random() * integrals.length)];
}

function addToHistory(formula, result, time) {
    const history = {
        formula: formula.length > 30 ? formula.substring(0, 30) + '...' : formula,
        result: result.length > 20 ? result.substring(0, 20) + '...' : result,
        time: time + 's',
        status: 'âœ… Ù…ÙˆÙÙ‚'
    };
    
    solutionHistory.unshift(history);
    if (solutionHistory.length > 5) {
        solutionHistory = solutionHistory.slice(0, 5);
    }
    
    updateHistoryTable();
}

function updateHistoryTable() {
    const table = document.getElementById('historyTable');
    table.innerHTML = solutionHistory.map(item => `
        <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
            <td style="padding: 12px; color: #cbd5e1;">${item.formula}</td>
            <td style="padding: 12px; color: #cbd5e1;">${item.result}</td>
            <td style="padding: 12px; color: #cbd5e1;">${item.time}</td>
            <td style="padding: 12px;">
                <span style="color: #10b981; font-weight: bold;">${item.status}</span>
            </td>
        </tr>
    `).join('');
}

function loadSampleFormula(type) {
    const samples = {
        quadratic: 'x^2 - 5*x + 6',
        cubic: 'x^3 - 2*x^2 - 5*x + 6',
        derivative: 'sin(x) + x^2',
        integral: '2*x + 3'
    };
    
    document.getElementById('formulaInput').value = samples[type];
    
    if (type === 'derivative') {
        document.querySelector('input[value="derivative"]').checked = true;
    } else if (type === 'integral') {
        document.querySelector('input[value="integral"]').checked = true;
    } else {
        document.querySelector('input[value="equation"]').checked = true;
    }
}

function copySolution() {
    const result = document.getElementById('finalResult').textContent;
    navigator.clipboard.writeText(result).then(() => {
        alert('âœ… Ù†ØªÛŒØ¬Ù‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú©Ù¾ÛŒ Ø´Ø¯');
    });
}

function saveSolution() {
    alert('ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ PDF Ø¯Ø± Ù†Ø³Ø®Ù‡ Ú©Ø§Ù…Ù„ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯');
}

function shareSolution() {
    alert('ğŸ”— Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¯Ø± Ù†Ø³Ø®Ù‡ Ú©Ø§Ù…Ù„ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯');
}

// Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ù„ÙˆØ¯Ø±
const style = document.createElement('style');
style.textContent = `
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
`;
document.head.appendChild(style);

// Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ØªØ§Ø±ÛŒØ®Ú†Ù‡
updateHistoryTable();
</script>
