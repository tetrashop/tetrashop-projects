name: ğŸš€ Deploy to Cloudflare Pages - Simple

on:
  push:
    branches: [ main, master ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    name: Deploy to Cloudflare Pages
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        
      - name: Setup deployment directory
        run: |
          # Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø§ÛŒØ±Ú©ØªÙˆØ±ÛŒ deploy
          mkdir -p deploy
          
          # Ú©Ù¾ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ
          cp -r pages-deploy/* deploy/ 2>/dev/null || true
          
          # Ø§Ú¯Ø± pages-deploy ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯ØŒ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø§Ø² root Ú©Ù¾ÛŒ Ú©Ù†
          if [ ! -d "pages-deploy" ]; then
            cp -r quantum-calligraphy-advanced deploy/ 2>/dev/null || true
            cp -r common-rhetoric-pro deploy/ 2>/dev/null || true
            cp -r aman-secret-cluster deploy/ 2>/dev/null || true
            cp -r chess-deepmind deploy/ 2>/dev/null || true
            
            # Ø§ÛŒØ¬Ø§Ø¯ index Ø§ØµÙ„ÛŒ
            cat > deploy/index.html << 'EOF'
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ØªØªØ±Ø§Ø´Ø§Ù¾ - Deployed</title>
    <style>
        body { font-family: Arial; text-align: center; padding: 50px; }
        .container { max-width: 600px; margin: 0 auto; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ ØªØªØ±Ø§Ø´Ø§Ù¾ - Ù…Ø³ØªÙ‚Ø± Ø´Ø¯Ù‡</h1>
        <p>Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ø² GitHub Ø¨Ù‡ Cloudflare Pages</p>
        <div style="margin: 30px;">
            <a href="/quantum-calligraphy-advanced/quantum_nlp_fixed.py">ğŸ§  Ù†Ú¯Ø§Ø± Ú©ÙˆØ§Ù†ØªÙˆÙ…</a><br>
            <a href="/common-rhetoric-pro/powerful_rhetoric_fixed.cpp">ğŸ’ª Ù†Ø·Ù‚ Ù…ØµØ·Ù„Ø­</a><br>
            <a href="/aman-secret-cluster/cluster_manager_fixed.py">ğŸ” Ø¢Ù…Ø§Ù† Ø±Ø§Ø²</a><br>
            <a href="/chess-deepmind/stockfish_deep_learning_engine.cpp">â™Ÿï¸ Ø´Ø·Ø±Ù†Ø¬ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ</a>
        </div>
    </div>
</body>
</html>
EOF
          fi
          
          # Ù†Ù…Ø§ÛŒØ´ Ø³Ø§Ø®ØªØ§Ø± Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡
          echo "ğŸ“ Ø³Ø§Ø®ØªØ§Ø± Ø¯Ø§ÛŒØ±Ú©ØªÙˆØ±ÛŒ deploy:"
          find deploy -type f -name "*.html" -o -name "*.py" -o -name "*.cpp" | head -10
          
      - name: Deploy to Cloudflare Pages
        uses: cloudflare/pages-action@1
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
          projectName: 'tetrashop-projects-1'
          directory: './deploy'
          branch: main
