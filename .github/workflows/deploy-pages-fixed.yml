name: ğŸš€ Deploy to Cloudflare Pages - Fixed

on:
  push:
    branches: [ main, master ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      deployments: write
    name: Deploy to Cloudflare Pages
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        
      - name: Build static site
        run: |
          mkdir -p build
          # Ú©Ù¾ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§
          cp -r quantum-calligraphy-advanced build/
          cp -r common-rhetoric-pro build/
          cp -r aman-secret-cluster build/
          cp -r chess-deepmind build/
          
          # Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ index Ø§ØµÙ„ÛŒ
          cat > build/index.html << 'EOF'
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØªØ±Ø§Ø´Ø§Ù¾ - Cloudflare Pages</title>
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333; margin: 0; padding: 40px 20px;
            text-align: center;
        }
        .container {
            max-width: 800px; margin: 0 auto;
            background: rgba(255,255,255,0.95);
            padding: 40px; border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1 { color: #2c3e50; }
        .btn {
            display: inline-block; padding: 12px 24px; margin: 10px;
            background: #667eea; color: white; text-decoration: none;
            border-radius: 25px; transition: all 0.3s ease;
        }
        .btn:hover { background: #764ba2; transform: scale(1.05); }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ ØªØªØ±Ø§Ø´Ø§Ù¾ - Ù…Ø³ØªÙ‚Ø± Ø´Ø¯Ù‡!</h1>
        <p>Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø² GitHub Ø¨Ù‡ Cloudflare Pages deploy Ø´Ø¯Ù‡ Ø§Ø³Øª</p>
        
        <div style="margin: 30px 0;">
            <a href="/quantum-calligraphy-advanced/" class="btn">ğŸ§  Ù†Ú¯Ø§Ø± Ú©ÙˆØ§Ù†ØªÙˆÙ…</a>
            <a href="/common-rhetoric-pro/" class="btn">ğŸ’ª Ù†Ø·Ù‚ Ù…ØµØ·Ù„Ø­</a>
            <a href="/aman-secret-cluster/" class="btn">ğŸ” Ø¢Ù…Ø§Ù† Ø±Ø§Ø²</a>
            <a href="/chess-deepmind/" class="btn">â™Ÿï¸ Ø´Ø·Ø±Ù†Ø¬ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ</a>
        </div>
        
        <p>âœ… Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø² GitHub Actions ÙØ¹Ø§Ù„ Ø§Ø³Øª</p>
    </div>
</body>
</html>
EOF
          
      - name: Deploy to Cloudflare Pages
        uses: cloudflare/pages-action@1
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
          projectName: 'tetrashop-projects-1'
          directory: './build'
          branch: main
